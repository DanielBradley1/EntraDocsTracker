{
  "sha": "22d21d41be5a9eb696267f36f51a9ae321161c1a",
  "url": "https://github.com/MicrosoftDocs/entra-docs/commit/22d21d41be5a9eb696267f36f51a9ae321161c1a",
  "author": "learn-build-service-prod[bot]",
  "email": "113403604+learn-build-service-prod[bot]@users.noreply.github.com",
  "date": "2025-10-13T17:13:50Z",
  "message": "Merge pull request #9994 from MicrosoftDocs/main\n\nAuto Publish – main to live - 2025-10-13 17:08 UTC",
  "ai_summary": {
    "Messages": "{\"content\":\"The following is the commit files that have changed: [\\r\\n  {\\r\\n    \\\"sha\\\": \\\"0d92ca6a649058574103492ff4ab1e9912054f95\\\",\\r\\n    \\\"filename\\\": \\\"docs/identity/authentication/TOC.yml\\\",\\r\\n    \\\"status\\\": \\\"modified\\\",\\r\\n    \\\"additions\\\": 2,\\r\\n    \\\"deletions\\\": 0,\\r\\n    \\\"changes\\\": 2,\\r\\n    \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/22d21d41be5a9eb696267f36f51a9ae321161c1a/docs%2Fidentity%2Fauthentication%2FTOC.yml\\\",\\r\\n    \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/22d21d41be5a9eb696267f36f51a9ae321161c1a/docs%2Fidentity%2Fauthentication%2FTOC.yml\\\",\\r\\n    \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fidentity%2Fauthentication%2FTOC.yml?ref=22d21d41be5a9eb696267f36f51a9ae321161c1a\\\",\\r\\n    \\\"patch\\\": \\\"@@ -52,6 +52,8 @@\\\\n       href: howto-authentication-use-email-signin.md\\\\n     - name: Security questions\\\\n       href: concept-authentication-security-questions.md\\\\n+    - name: Remove passwords from Microsoft Entra ID\\\\n+      href: how-to-plan-password-scramble-phishing-resistant-passwordless-authentication.md\\\\n   - name: Conditional Access authentication strength\\\\n     items:\\\\n     - name: Overview\\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"sha\\\": \\\"1677acda4c9f03b6a0a38a61f6f8234453d57e15\\\",\\r\\n    \\\"filename\\\": \\\"docs/identity/authentication/how-to-plan-password-scramble-phishing-resistant-passwordless-authentication.md\\\",\\r\\n    \\\"status\\\": \\\"added\\\",\\r\\n    \\\"additions\\\": 135,\\r\\n    \\\"deletions\\\": 0,\\r\\n    \\\"changes\\\": 135,\\r\\n    \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/22d21d41be5a9eb696267f36f51a9ae321161c1a/docs%2Fidentity%2Fauthentication%2Fhow-to-plan-password-scramble-phishing-resistant-passwordless-authentication.md\\\",\\r\\n    \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/22d21d41be5a9eb696267f36f51a9ae321161c1a/docs%2Fidentity%2Fauthentication%2Fhow-to-plan-password-scramble-phishing-resistant-passwordless-authentication.md\\\",\\r\\n    \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fidentity%2Fauthentication%2Fhow-to-plan-password-scramble-phishing-resistant-passwordless-authentication.md?ref=22d21d41be5a9eb696267f36f51a9ae321161c1a\\\",\\r\\n    \\\"patch\\\": \\\"@@ -0,0 +1,135 @@\\\\n+---\\\\n+title: Remove Passwords from Microsoft Entra ID\\\\n+description: Password scrambling guidance to deploy passwordless and phishing-resistant authentication for organizations that use Microsoft Entra ID.\\\\n+\\\\n+ms.service: entra-id \\\\n+ms.subservice: authentication\\\\n+ms.topic: how-to\\\\n+ms.date: 10/03/2025\\\\n+\\\\n+ms.author: justinha\\\\n+author: mepples21\\\\n+manager: dougeby\\\\n+ms.reviewer: miepping\\\\n+\\\\n+ms.collection: M365-identity-device-management\\\\n+# Customer intent: As an identity administrator, I want to understand how to plan phishing-resistant and passwordless authentication deployment in Microsoft Entra ID\\\\n+\\\\n+---\\\\n+\\\\n+# Plan to remove passwords from Microsoft Entra ID\\\\n+\\\\n+Passwords are one of the least secure authentication methods available. They are vulnerable to a wide range of threats—including phishing, credential stuffing, brute-force attacks, and social engineering. To realize the benefits of passwordless authentication in Microsoft Entra ID, you must ensure passwords are no longer available as a sign-in option in your tenant.\\\\n+\\\\n+Password scrambling ensures that users can't authenticate using passwords. It forces them to use more secure passwordless credentials like Windows Hello for Business, FIDO2 security keys, or Microsoft Authenticator. This article provides guidance about how to scramble passwords for both hybrid users who are synced from on-premises Active Directory Domain Services (AD DS) and cloud-only users in Microsoft Entra ID.\\\\n+ \\\\n+\\\\n+## Prerequisites\\\\n+\\\\n+- Microsoft Entra Connect sync [version 2.4.18.0 or later](~/identity/hybrid/connect/how-to-connect-password-hash-synchronization.md#password-hash-synchronization-and-smart-card-authentication)\\\\n+\\\\n+## Scramble passwords for hybrid user accounts synced from on-premises AD DS\\\\n+\\\\n+Organizations with users synced from on-premises AD DS to Microsoft Entra ID should scramble user passwords in the on-premises environment, as on-premises is the source of authority for synced user accounts and their passwords. If your organization uses [cloud authentication](~/identity/hybrid/connect/choose-ad-authn.md) and syncs password hashes to Microsoft Entra ID, then these scrambled passwords are also synced to the cloud. The sync process ensures that users aren't aware of their passwords in either on-premises or the cloud, preventing their use and driving users towards using more secure phishing-resistant passwordless credentials.\\\\n+\\\\n+### Option 1: Scramble on-premises user passwords with Smart Card Required for Interactive Logon (SCRIL)\\\\n+\\\\n+Scrambling user passwords with the Smart Card Required for Interactive Logon (SCRIL) setting is the recommended method for scrambling user passwords on-premises because it's a natively available option in AD DS. When SCRIL is enabled on a user object, the user’s AD DS password is randomized by the domain controller to a value no one knows. The user has to enroll and then must authenticate to the AD DS domain by using a smart card or Windows Hello for Business. With password hash synchronization enabled, this AD DS password hash is also synced with Microsoft Entra ID.\\\\n+\\\\n+The Smart Card Required for Interactive Logon setting can be configured using the Active Directory Users and Computers tool. The following sample PowerShell script can be used to enable the setting programmatically, including for many users at once. Modify the **samAccountName** variable of the script to match your environment, and then run it in a PowerShell session. Use the credentials of an admin account with appropriate permissions in on-premises AD.\\\\n+\\\\n+```PowerShell\\\\n+$samAccountName = <sAMAccountName of the user>\\\\n+\\\\n+Import-Module ActiveDirectory\\\\n+Set-ADUser -Identity $samAccountName -SmartcardLogonRequired $true\\\\n+```\\\\n+\\\\n+### Option 2: Scramble on-premises user passwords with a scripted random value\\\\n+\\\\n+If you don't want to use Smart Card Required for Interactive Logon (SCRIL), another approach can be to scramble the password with a script. If users need to recover their passwords to access legacy apps, use a script to scramble the password. Run the script routinely to scramble any passwords that users reset back to a known state.\\\\n+\\\\n+The following sample PowerShell script generates a random password of 64 characters and sets it for the user specified in the variable name **$samAccountName** against on-premises AD DS domain. Modify the **$samAccountName** variable of the script to match your environment, and then run it in a PowerShell session. Use the credentials of an admin account with appropriate permissions in on-premises AD DS.\\\\n+\\\\n+```PowerShell\\\\n+$samAccountName = <sAMAccountName of the user>\\\\n+\\\\n+Import-Module ActiveDirectory\\\\n+\\\\n+function Generate-RandomPassword{\\\\n+    [CmdletBinding()]\\\\n+    param (\\\\n+      [int]$Length = 64\\\\n+    )\\\\n+  $chars = \\\\\\\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()-_=+[]{};:,.<>/?\\\\\\\\|`~\\\\\\\"\\\\n+  $random = New-Object System.Random\\\\n+  $password = \\\\\\\"\\\\\\\"\\\\n+  for ($i = 0; $i -lt $Length; $i++) {\\\\n+    $index = $random.Next(0, $chars.Length)\\\\n+    $password += $chars[$index]\\\\n+  }\\\\n+  return $password\\\\n+}\\\\n+\\\\n+Import-Module ActiveDirectory\\\\n+\\\\n+$NewPassword = ConvertTo-SecureString -String (Generate-RandomPassword) -AsPlainText -Force\\\\n+\\\\n+Set-ADAccountPassword -Identity $samAccountName -NewPassword $NewPassword -Reset\\\\n+```\\\\n+\\\\n+> [!CAUTION]\\\\n+> Execute the script only from a secure and trusted environment, and ensure that the script isn't logged. Treat the host where the script is executed as a privileged host, with the same level of security as a domain controller.\\\\n+\\\\n+## Randomize passwords for cloud user accounts in Microsoft Entra ID\\\\n+\\\\n+Cloud-based passwordless users should have their password set to a random value. Randomizing the password prevents the user from knowing the password and using it to authenticate. Optionally, organizations can allow end users to reset their password if they encounter an application where they need the password. Run the script routinely to scramble any passwords that users have reset back to a known state.\\\\n+\\\\n+The following sample PowerShell script generates a random password of 64 characters and sets it for the user specified in the variable name **$userId** against Microsoft Entra ID. Modify the **$userId** variable of the script to match your environment, and then run it in a PowerShell session. When prompted to authenticate to Microsoft Entra ID, use the credentials of an account with a role that can reset passwords.\\\\n+\\\\n+```PowerShell\\\\n+$userId = \\\\\\\"<UPN of the user>\\\\\\\"\\\\n+\\\\n+function Generate-RandomPassword{\\\\n+    [CmdletBinding()]\\\\n+    param (\\\\n+      [int]$Length = 64\\\\n+    )\\\\n+  $chars = \\\\\\\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()-_=+[]{};:,.<>/?\\\\\\\\|`~\\\\\\\"\\\\n+  $random = New-Object System.Random\\\\n+  $password = \\\\\\\"\\\\\\\"\\\\n+  for ($i = 0; $i -lt $Length; $i++) {\\\\n+    $index = $random.Next(0, $chars.Length)\\\\n+    $password += $chars[$index]\\\\n+  }\\\\n+  return $password\\\\n+}\\\\n+\\\\n+Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser -Force\\\\n+Install-Module Microsoft.Graph -Scope CurrentUser\\\\n+Import-Module Microsoft.Graph.Users.Actions\\\\n+Connect-MgGraph -Scopes \\\\\\\"UserAuthenticationMethod.ReadWrite.All\\\\\\\" -NoWelcome\\\\n+\\\\n+$passwordParams = @{\\\\n+ UserId = $userId\\\\n+ AuthenticationMethodId = \\\\\\\"28c10230-6103-485e-b985-444c60001490\\\\\\\"\\\\n+ NewPassword = Generate-RandomPassword\\\\n+}\\\\n+\\\\n+Reset-MgUserAuthenticationMethodPassword @passwordParams\\\\n+```\\\\n+\\\\n+> [!CAUTION]\\\\n+> Execute the script only from a secure and trusted environment, and ensure that the script isn't logged. Treat the host where the script is executed as a privileged host, with the same level of security as a domain controller.\\\\n+\\\\n+## More considerations for organizations that completely enforce phishing-resistant authentication\\\\n+\\\\n+If your organization no longer needs passwords whatsoever, because all applications and scenarios are compatible with passwordless credentials, then you may no longer need to provide users with self-service password recovery options. Consider disabling tools that let users override the scrambled passwords and gain access to their password again.\\\\n+\\\\n+- Disable self-service password reset (SSPR) tools, including [Microsoft Entra self-service password reset](~/identity/authentication/tutorial-enable-sspr-writeback.md#clean-up-resources).\\\\n+- Disable password writeback from [Microsoft Entra to on-premises Active Directory](~/identity/authentication/tutorial-enable-sspr-writeback.md#clean-up-resources).\\\\n+- Set your Microsoft Entra password policy to have [no expiry](~/identity/authentication/concept-sspr-policy.md).\\\\n+\\\\n+## Related content\\\\n+\\\\n+[Deploy a phishing-resistant authentication in Microsoft Entra ID](how-to-deploy-phishing-resistant-passwordless-authentication.md)\\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"sha\\\": \\\"e0fe0740fb748e255dd6b40ff81d53dcafd7c04b\\\",\\r\\n    \\\"filename\\\": \\\"docs/identity/hybrid/how-to-group-source-of-authority-configure.md\\\",\\r\\n    \\\"status\\\": \\\"modified\\\",\\r\\n    \\\"additions\\\": 11,\\r\\n    \\\"deletions\\\": 2,\\r\\n    \\\"changes\\\": 13,\\r\\n    \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/22d21d41be5a9eb696267f36f51a9ae321161c1a/docs%2Fidentity%2Fhybrid%2Fhow-to-group-source-of-authority-configure.md\\\",\\r\\n    \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/22d21d41be5a9eb696267f36f51a9ae321161c1a/docs%2Fidentity%2Fhybrid%2Fhow-to-group-source-of-authority-configure.md\\\",\\r\\n    \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fidentity%2Fhybrid%2Fhow-to-group-source-of-authority-configure.md?ref=22d21d41be5a9eb696267f36f51a9ae321161c1a\\\",\\r\\n    \\\"patch\\\": \\\"@@ -6,7 +6,7 @@ manager: dougeby\\\\n ms.service: entra-id\\\\n ms.subservice: hybrid\\\\n ms.topic: how-to\\\\n-ms.date: 10/02/2025\\\\n+ms.date: 10/13/2025\\\\n ms.author: justinha\\\\n ms.reviewer: dhanyak\\\\n ---\\\\n@@ -69,7 +69,16 @@ Follow these steps to grant `Group-OnPremisesSyncBehavior.ReadWrite.All` permiss\\\\n \\\\n ## Prepare groups for Group SOA conversion and provisioning\\\\n \\\\n-If you want to provision the group back to AD, ensure you can preserve the OU Path and set it in the **Group Provision to AD** configuration with the right mapping.\\\\n+If you want to provision the group back to AD DS, plan to complete the following steps to preserve the OU Path and set it in the **Group Provision to AD** configuration with the right mapping:\\\\n+\\\\n+1. Change the group scope for the AD DS groups to Universal.\\\\n+1. Create a tenant-scoped directory extension property for groups. \\\\n+1. Map an on-premises value, such as the distinguished name (DN), directly into the extension property. \\\\n+1. Verify the property value using Microsoft Graph. \\\\n+1. Convert the Source of Authority (SOA) when ready. \\\\n+1. Use custom expressions to ensure Cloud Sync provisions groups back to AD DS with the same CN and OU values. \\\\n+\\\\n+For more information, see [Provision groups to Active Directory Domain Services by using Microsoft Entra Cloud Sync](cloud-sync/tutorial-group-provisioning.md).\\\\n \\\\n ## Convert SOA for a test group\\\\n \\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"sha\\\": \\\"8d8be905d374f45bcf70c558ed104ad16b0bbc05\\\",\\r\\n    \\\"filename\\\": \\\"docs/identity/users/domains-admin-takeover.md\\\",\\r\\n    \\\"status\\\": \\\"modified\\\",\\r\\n    \\\"additions\\\": 1,\\r\\n    \\\"deletions\\\": 1,\\r\\n    \\\"changes\\\": 2,\\r\\n    \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/22d21d41be5a9eb696267f36f51a9ae321161c1a/docs%2Fidentity%2Fusers%2Fdomains-admin-takeover.md\\\",\\r\\n    \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/22d21d41be5a9eb696267f36f51a9ae321161c1a/docs%2Fidentity%2Fusers%2Fdomains-admin-takeover.md\\\",\\r\\n    \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fidentity%2Fusers%2Fdomains-admin-takeover.md?ref=22d21d41be5a9eb696267f36f51a9ae321161c1a\\\",\\r\\n    \\\"patch\\\": \\\"@@ -9,7 +9,7 @@ ms.topic: how-to\\\\n ms.date: 01/06/2025\\\\n ms.author: barclayn\\\\n ms.reviewer: sumitp\\\\n-ms.custom: it-pro, has-azure-ad-ps-ref, sfi-ga-nochange\\\\n+ms.custom: it-pro, no-azure-ad-ps-ref, sfi-ga-nochange\\\\n ---\\\\n # Take over an unmanaged directory as administrator in Microsoft Entra ID\\\\n \\\"\\r\\n  }\\r\\n]. Please summarise it in a few sentences, using UK grammar and ensure the response is formatted for markdown. Do not start the response with here is summary.\",\"role\":\"user\"}",
    "Response": "This commit introduces a new guide on how to plan and implement passwordless authentication in Microsoft Entra ID, including methods for scrambling passwords for both hybrid and cloud-only users. It also includes updates to existing documentation regarding group source of authority configuration and a minor correction to a custom tag in the administrator takeover article.",
    "Model": "google:gemini-2.5-flash-lite",
    "Provider": "google",
    "ModelName": "gemini-2.5-flash-lite",
    "Timestamp": "2025-10-13T19:01:15.1052028+00:00"
  },
  "files": [
    {
      "filename": "docs/identity/authentication/TOC.yml",
      "status": "modified",
      "additions": 2,
      "deletions": 0
    },
    {
      "filename": "docs/identity/authentication/how-to-plan-password-scramble-phishing-resistant-passwordless-authentication.md",
      "status": "added",
      "additions": 135,
      "deletions": 0
    },
    {
      "filename": "docs/identity/hybrid/how-to-group-source-of-authority-configure.md",
      "status": "modified",
      "additions": 11,
      "deletions": 2
    },
    {
      "filename": "docs/identity/users/domains-admin-takeover.md",
      "status": "modified",
      "additions": 1,
      "deletions": 1
    }
  ]
}