{
  "sha": "abcc220b43031ddc918f80b6ee125b221d3594de",
  "url": "https://github.com/MicrosoftDocs/entra-docs/commit/abcc220b43031ddc918f80b6ee125b221d3594de",
  "author": "learn-build-service-prod[bot]",
  "email": "113403604+learn-build-service-prod[bot]@users.noreply.github.com",
  "date": "2025-09-16T05:03:02Z",
  "message": "Merge pull request #9706 from MicrosoftDocs/main\n\nAuto Publish – main to live - 2025-09-16 05:01 UTC",
  "ai_summary": {
    "Messages": "{\"role\":\"user\",\"content\":\"The following is the commit files that have changed: [\\r\\n  {\\r\\n    \\\"sha\\\": \\\"c6a58814bca149619ea66b05d2055360009b16a5\\\",\\r\\n    \\\"filename\\\": \\\"docs/identity/authentication/kerberos.md\\\",\\r\\n    \\\"status\\\": \\\"modified\\\",\\r\\n    \\\"additions\\\": 72,\\r\\n    \\\"deletions\\\": 31,\\r\\n    \\\"changes\\\": 103,\\r\\n    \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/abcc220b43031ddc918f80b6ee125b221d3594de/docs%2Fidentity%2Fauthentication%2Fkerberos.md\\\",\\r\\n    \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/abcc220b43031ddc918f80b6ee125b221d3594de/docs%2Fidentity%2Fauthentication%2Fkerberos.md\\\",\\r\\n    \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fidentity%2Fauthentication%2Fkerberos.md?ref=abcc220b43031ddc918f80b6ee125b221d3594de\\\",\\r\\n    \\\"patch\\\": \\\"@@ -16,7 +16,8 @@ ms.reviewer: Vimala\\\\n \\\\n **Microsoft Entra Kerberos** is a cloud-native authentication protocol designed to bridge hybrid identity scenarios, enabling secure access to both cloud and on-premises resources. It extends traditional Kerberos capabilities into the Microsoft Entra ecosystem, allowing organizations to modernize their identity infrastructure without sacrificing compatibility with legacy systems. It also enables seamless single sign-on (SSO) to on-premises resources for users authenticated with modern credentials like Windows Hello for Business or FIDO2 security keys.\\\\n \\\\n-In practice, Microsoft Entra Kerberos turns Microsoft Entra ID into a cloud-based Key Distribution Center (KDC) for Kerberos authentication. This capability allows Microsoft Entra ID to issue Kerberos tickets for users, extending traditional Kerberos authentication beyond on-premises Active Directory. Microsoft Entra Kerberos was introduced in 2021 to help bridge the gap between legacy, on-premises authentication protocols, and modern cloud identity.\\\\n+Microsoft Entra Kerberos was introduced in 2021 to help bridge the gap between legacy, on-premises authentication protocols, and modern cloud identity.\\\\n+In practice, Microsoft Entra Kerberos turns Microsoft Entra ID into a cloud-based Key Distribution Center (KDC) for Kerberos authentication. This capability allows Microsoft Entra ID to issue Kerberos tickets for users, extending traditional Kerberos authentication beyond on-premises Active Directory. \\\\n \\\\n In a hybrid scenario, where accounts exist on-premises Active Directory Domain Services (AD DS) and those users are synchronized to Microsoft Entra ID, Microsoft Entra Kerberos plays a crucial role. It enables these hybrid users to authenticate to cloud and on-premises resources using Kerberos without needing direct line of sight to domain controllers. For example, if a Microsoft Entra ID–joined Windows client accesses a file share or application over the internet, Microsoft Entra ID can issue the necessary Kerberos tickets on behalf of the on-premises Active Directory environment.\\\\n \\\\n@@ -46,54 +47,92 @@ A hybrid identity refers to a user identity that exists both in an on-premises A\\\\n \\\\n ## How Microsoft Entra Kerberos works\\\\n \\\\n-**Microsoft Entra Kerberos** allows your Microsoft Entra ID tenant to operate as a dedicated Kerberos realm alongside your existing on-premises Active Directory realm. When a user signs in to a Windows device that is either Microsoft Entra ID‑joined or hybrid joined, the device authenticates with Microsoft Entra ID and receives a [Primary Refresh Token](../devices/concept-primary-refresh-token.md).\\\\n-\\\\n-In addition to the PRT, Entra ID can issue a partial Ticket Granting Ticket (TGT). This TGT enables the user to exchange it for a fully formed on‑premises TGT when needed, and it can also issue a Cloud Ticket Granting Ticket (Cloud TGT) which enables the user to request Kerberos service tickets for accessing cloud‑based resources. In this model, Microsoft Entra ID acts as the Key Distribution Center (KDC), facilitating secure and seamless authentication.\\\\n+**Microsoft Entra Kerberos** allows your Microsoft Entra ID tenant to operate as a dedicated Kerberos realm alongside your existing on-premises Active Directory realm. When a user signs in to a Windows device that is either Microsoft Entra ID‑joined or hybrid joined, the device authenticates with Microsoft Entra ID and receives a [Primary Refresh Token](../devices/concept-primary-refresh-token.md). In addition to the PRT, Entra ID issues a Cloud Ticket Granting Ticket (TGT) for the realm KERBEROS.MICROSOFTONLINE.COM, a partial TGT to access on-premises resources. In this model, Microsoft Entra ID acts as the Key Distribution Center (KDC), facilitating secure and seamless authentication.\\\\n \\\\n ## Authentication flow\\\\n \\\\n-### User authentication:\\\\n-- The user signs into a Windows device (Windows 10 2004+ or Windows 11).\\\\n+### 1. User authentication:\\\\n+- The user signs into a Windows 10 (2004+) or Windows 11 device that is either Microsoft Entra joined or hybrid joined.\\\\n - The Local Security Authority (LSA) uses the Cloud Authentication Provider (CloudAP) to authenticate via OAuth to Microsoft Entra ID.\\\\n-- Microsoft Entra ID issues a Primary Refresh Token (PRT) containing user and device information.\\\\n-- The TGT is for the realm KERBEROS.MICROSOFTONLINE.COM, which acts as a cloud-based Kerberos Distribution Center (KDC).\\\\n \\\\n-### Cloud TGT issuance:\\\\n-- If the user signs in with a passwordless method (such as FIDO2 or Windows Hello for Business), Microsoft Entra ID issues a Partial Ticket Granting Ticket (Partial TGT) for the user's on-premises Active Directory (AD) domain. This Partial TGT contains the user's Security Identifier (SID) but no authorization data.\\\\n+### 2. Token Issuance\\\\n+- Upon successful authentication, Microsoft Entra ID issues a Primary Refresh Token (PRT) containing user and device information.\\\\n+- Alongside the PRT, a Cloud Ticket Granting Ticket (Cloud TGT) is issued for the realm KERBEROS.MICROSOFTONLINE.COM, which acts as a cloud-based Kerberos Distribution Center (KDC).\\\\n+- Entra ID also issues a Partial TGT containing the user’s SID (Security Identifier) but no group claims. This Partial TGT is not sufficient for direct access to on-prem resources.\\\\n+\\\\n+#### Cloud TGT issuance:\\\\n+\\\\n+Microsoft Entra ID acts as a Key Distribution Center (KDC) for cloud resources, issuing a Cloud Ticket Granting Ticket (Cloud TGT) to the client when appropriate. The client recognizes the Microsoft Entra ID tenant as a separate Kerberos realm for cloud resources and the TGT is stored in the client's Kerberos ticket cache.\\\\n+\\\\n+Cloud TGT issued by Microsoft Entra ID\\\\n+- is for the realm KERBEROS.MICROSOFTONLINE.COM. \\\\n+- enables access to cloud-based resources such as Azure Files, Azure SQL, and other services integrated with Entra Kerberos. - \\\\n+- contains authorization data specific to cloud services and used directly to request Kerberos service tickets for cloud resources. \\\\n+- always issued when a user signs into a Windows device with supported credentials (e.g., WHfB, FIDO2).\\\\n+- No dependency on on-premises domain controllers.\\\\n+\\\\n+>[!NOTE]\\\\n+> The Cloud TGT isn't a replacement for the on-premises TGT. It's another ticket that allows access to cloud resources. The on-premises TGT is still required for accessing on-premises resources.\\\\n+\\\\n+#### Partial TGT Issuance for On-Prem Access\\\\n \\\\n-- A Kerberos server object exists in the on-premises AD, created and synchronized via Microsoft Entra Connect. This object allows Microsoft Entra ID to generate these partial TGTs for use by on-premises domain controllers to facilitate on-premises resource access.\\\\n+**Prerequisites** \\\\n+- Users must be synchronized from on-premises Active Directory to Microsoft Entra ID using Entra Connect.\\\\n+- A Kerberos Server Object must exist in the on-prem AD and be synchronized to Entra ID. This object allows Entra ID to issue Partial TGTs that can be redeemed by on-prem domain controllers.\\\\n+- Devices must be running Windows 10 (2004+) or Windows 11.\\\\n+- Devices should be Entra joined or hybrid joined.\\\\n+- Windows Hello for Business (WHfB) or FIDO2 authentication methods are recommended for optimal integration.\\\\n+- On-premises domain controllers must be patched to support Kerberos Cloud Trust.\\\\n+- Ensure line-of-sight between client devices and domain controllers for ticket exchange.\\\\n \\\\n-- The Partial TGT issued by Entra ID is exchanged with an on-premises Active Directory domain controller to obtain a full TGT that includes group memberships and other access control data. The Partial TGT must be exchanged with a domain controller to gain full authorization information.\\\\n+If the user signs in with a password-less method (such as FIDO2 or Windows Hello for Business) on devices with Windows 10 (2004+) or Windows 11, Microsoft Entra ID issues a Partial Ticket Granting Ticket (Partial TGT) for the user's on-premises Active Directory (AD) domain. This Partial TGT contains the user's Security Identifier (SID) but no authorization data.\\\\n \\\\n-- Microsoft Entra ID also acts as a Key Distribution Center (KDC) for cloud resources, issuing a Cloud Ticket Granting Ticket (Cloud TGT) to the client when appropriate. The Cloud TGT is stored in the client's Kerberos ticket cache, and the client recognizes the Microsoft Entra ID tenant as a separate Kerberos realm for cloud resources.\\\\n+Partial TGT issued by Microsoft Entra ID\\\\n+- enables access to on-premises resources by acting as a bridge between Entra ID and Active Directory.\\\\n+- contains limited data (e.g., user SID) and no group claims and is not sufficient on its own to access on-prem resources.\\\\n+- only issued if the environment is configured to support it (e.g., hybrid identity setup, Entra Kerberos server object in AD).\\\\n+- must be exchanged with an on-premises AD domain controller for a full TGT that includes group memberships and other access control data. The Partial TGT must be exchanged with a domain controller to gain full authorization information which is then used to access resources like SMB shares or SQL servers.\\\\n \\\\n-### Microsoft Entra Kerberos TGT and Active Directory access control\\\\n-Possessing an Microsoft Entra Kerberos Ticket Granting Ticket (TGT) for a user's on-premises Active Directory (AD) domain does not automatically grant access to a full AD TGT. To complete the exchange, the user must be listed in the reveal credentials allowlist on the Azure AD Read-Only Domain Controller (RODC) object and not in the blocklist. As a best practice, the default configuration should be set to Deny, with explicit Allow permissions granted only to groups authorized to use Microsoft Entra Kerberos.\\\\n+#### Microsoft Entra Kerberos TGT and Active Directory access control\\\\n+Possessing an Microsoft Entra Kerberos Ticket Granting Ticket (TGT) for a user's on-premises Active Directory (AD) domain does not automatically grant access to a full AD TGT. In Microsoft Entra Kerberos, the Azure AD Read-Only Domain Controller object’s allow and deny lists are used to control which users are permitted to receive Partial TGTs from Entra ID for on-premises resource access. This mechanism is critical for limiting exposure and enforcing security boundaries, especially in hybrid environments where Entra ID issues Partial TGTs that must be redeemed with on-prem AD domain controllers for a full TGT.\\\\n+\\\\n+To complete the exchange, the user must be listed in the reveal credentials allowlist on the Azure AD Read-Only Domain Controller (RODC) object and not in the blocklist. \\\\n \\\\n :::image type=\\\\\\\"content\\\\\\\" source=\\\\\\\"media/kerberos/kerberos-account.png\\\\\\\" alt-text=\\\\\\\"Screenshot of a user account properties in Active Directory.\\\\\\\" lightbox=\\\\\\\"media/kerberos/kerberos-account.png\\\\\\\":::\\\\n     \\\\n-During the exchange process, where a partial Microsoft Entra Kerberos TGT is converted into a full AD TGT these lists are evaluated to determine access eligibility. If a user is blocked or not explicitly allowed, the request is denied and results in an error.\\\\n+During the exchange process, where a partial Microsoft Entra Kerberos TGT is converted into a full AD TGT these lists are evaluated to determine access eligibility. If the user is on the allow list, the full TGT is issued. If the user is on the deny list, the request is rejected, and authentication fails.\\\\n \\\\n+As a best practice, the default configuration should be set to Deny, with explicit Allow permissions granted only to groups authorized to use Microsoft Entra Kerberos.\\\\n     \\\\n >[!IMPORTANT]\\\\n-> The TGT is only recognized by on-premises Active Directory. Therefore, having access to a partial TGT doesn't provide access to other resources outside of AD.\\\\n+> The partial TGT is only recognized by on-premises Active Directory. Therefore, having access to a partial TGT doesn't provide access to other resources outside of AD.\\\\n \\\\n-### Cloud TGT for cloud resources:\\\\n-- Microsoft Entra ID acts as a Key Distribution Center (KDC under the realm KERBEROS.MICROSOFTONLINE.COM issuing a Cloud Kerberos Ticket Granting Ticket (TGT) to the client.\\\\n-- The client recognizes the Microsoft Entra ID tenant as a separate Kerberos realm for cloud resources and the TGT is stored in the client's Kerberos ticket cache.\\\\n-- The cloud TGT contains authorization data only specific to cloud services and is sufficient for accessing resources integrated with Microsoft Entra Kerberos, such as Azure Files and Azure SQL.\\\\n \\\\n->[!NOTE]\\\\n-> The Cloud TGT isn't a replacement for the on-premises TGT. It's another ticket that allows access to cloud resources. The on-premises TGT is still required for accessing on-premises resources.\\\\n+#### Realm mapping and Entra tenant info\\\\n+\\\\n+**Realm mapping**\\\\n+\\\\n+Realm mapping is the mechanism that allows Windows clients to determine which Kerberos realm to contact when accessing a resource, especially important when both on-premises Active Directory and Microsoft Entra ID are used in the same environment.\\\\n+\\\\n+Windows uses the namespace of the service (e.g., *.file.core.windows.net) to decide whether to contact Active Directory or Entra ID for a Kerberos ticket. Since both cloud and on-prem services may share the same namespace, Windows cannot distinguish them automatically. \\\\n+\\\\n+To resolve this, admins configure host name-to-Kerberos realm mappings via:\\\\n+- Group Policy: Computer Configuration > Administrative Templates > System > Kerberos > Define host name-to-Kerberos realm mappings\\\\n+- Intune Policy CSP: Kerberos/HostToRealm\\\\n \\\\n+Example mapping: contoso.com (.file.core.windows.net → KERBEROS.MICROSOFTONLINE.COM)\\\\n \\\\n+This tells Windows to use Entra Kerberos for specific Azure Files instances, while defaulting others to on-premises AD.\\\\n \\\\n-### Realm mapping and Azure tenant info:\\\\n-- Windows LSASS manages the Kerberos Cloud TGT, realm mapping, and Entra ID tenant information. The Kerberos stack maintains the Cloud TGT and realm mapping, using a KDC Proxy to route Kerberos traffic to Microsoft Entra ID.\\\\n-- For Azure Virtual Desktop, the user receives both a PRT and Cloud TGT. Azure Virtual Desktop uses FSLogix to load the user profile from Azure Files.\\\\n+**Azure Tenant Information in Entra Kerberos**\\\\n+Microsoft Entra ID acts as a Kerberos Distribution Center (KDC) for cloud resources. It maintains tenant-specific configurations that guide how Kerberos tickets are issued and validated.\\\\n \\\\n+- Cloud TGT (Ticket Granting Ticket): Issued by Entra ID for the realm KERBEROS.MICROSOFTONLINE.COM. Stored in the client’s Kerberos ticket cache and used for cloud resource access.\\\\n+- KDC Proxy: Routes Kerberos traffic securely over the internet to Entra ID. This enables clients to obtain tickets without direct connectivity to domain controllers.\\\\n+- Azure Tenant Recognition: The Kerberos stack uses realm mapping and tenant ID to validate the Cloud TGT and issue service tickets. \\\\n+ \\\\n \\\\n-### Service ticket request and issuance:\\\\n+### 4. Service ticket request and issuance:\\\\n \\\\n **Access on-premises resources**:\\\\n - Entra ID issues a partial TGT.\\\\n@@ -123,9 +162,6 @@ The client uses cloud TGT to request service tickets for cloud resources. No int\\\\n | Verification tool (macOS) | tgt_cloud | tgt_ad |\\\\n | Verification tool (Windows) | klist cloud_debug | klist get krbtgt |\\\\n \\\\n-\\\\n-\\\\n-\\\\n ## Scenarios\\\\n \\\\n ### Windows authentication access to Azure SQL managed instance using Microsoft Entra Kerberos\\\\n@@ -137,7 +173,6 @@ Microsoft Entra Kerberos users can sign in to Windows with modern credentials, s\\\\n Detailed information at [Passwordless security key sign-in to on-premises resources](howto-authentication-passwordless-security-key-on-premises.md)\\\\n \\\\n ### Enable Kerberos SSO to on-premises Active Directory and Microsoft Entra ID Kerberos resources in platform SSO\\\\n-\\\\n Along with PSSO PRT, Microsoft Entra also issues both on-premises and cloud-based Kerberos Ticket Granting Tickets (TGTs) which are then shared with the native Kerberos stack in macOS via TGT mapping in PSSO.  \\\\n Detailed information at: [Enable Kerberos SSO to on-premises Active Directory and Microsoft Entra ID Kerberos Resources in Platform SSO](~/identity/devices/device-join-macos-platform-single-sign-on-kerberos-configuration.md)\\\\n \\\\n@@ -150,6 +185,12 @@ Detailed information at: [Store FSLogix profile containers on Azure Files using\\\\n Microsoft Entra Kerberos authentication hybrid users to access Azure file shares using Kerberos authentication, using Microsoft Entra ID to issue the necessary Kerberos tickets to access the file share with the SMB protocol.  \\\\n Detailed information at: [Microsoft Entra Kerberos for hybrid identities on Azure Files](/azure/storage/files/storage-files-identity-auth-hybrid-identities-enable?tabs=azure-portal%2Cintune)\\\\n \\\\n+## Security considerations\\\\n+- Microsoft Entra Kerberos does not issue Partial TGTs to identities not synced to Entra ID.\\\\n+- Entra Kerberos uses a secure TGT exchange model via KDC Proxy, minimizing exposure to domain controllers and reducing attack surface.\\\\n+- Admins can configure group resolution policies to limit which groups are included in Kerberos tickets. These controls are essential for managing ticket size and reducing exposure to unnecessary group data.\\\\n+- Customers are advised to maintain clear separation between cloud and on-prem environments. Synchronizing sensitive accounts like krbtgt_AzureAD to on-prem AD is discouraged due to privilege escalation risks.\\\\n+- Use Azure AD Read-Only Domain Controller (RODC) object’s allow and deny lists are used to control which users are permitted to receive Partial TGTs from Entra ID for on-premises resource access.\\\\n \\\\n ## Limitations and considerations\\\\n \\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"sha\\\": \\\"81d1a38efc3c764f655e919f2acb3fdfb5a2f4f1\\\",\\r\\n    \\\"filename\\\": \\\"docs/includes/application-integration-partners.md\\\",\\r\\n    \\\"status\\\": \\\"modified\\\",\\r\\n    \\\"additions\\\": 2,\\r\\n    \\\"deletions\\\": 2,\\r\\n    \\\"changes\\\": 4,\\r\\n    \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/abcc220b43031ddc918f80b6ee125b221d3594de/docs%2Fincludes%2Fapplication-integration-partners.md\\\",\\r\\n    \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/abcc220b43031ddc918f80b6ee125b221d3594de/docs%2Fincludes%2Fapplication-integration-partners.md\\\",\\r\\n    \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fincludes%2Fapplication-integration-partners.md?ref=abcc220b43031ddc918f80b6ee125b221d3594de\\\",\\r\\n    \\\"patch\\\": \\\"@@ -44,12 +44,12 @@ The Microsoft Entra platform integrates with IDMWORKS IdentityForge (IDF) Gatewa\\\\n The IDF Gateway for Microsoft Entra ID provides lifecycle management for import sources and provisioning target systems that aren't covered by the Microsoft Entra connector portfolio like Mainframe systems RACF, Top Secret, and ACF2, or Healthcare applications EPIC and Cerner. The IDF Gateway powers Microsoft Entra identity lifecycle management (LCM) to continuously synchronize user account information from Mainframe and Healthcare sources and to automate the account provisioning lifecycle use cases like create, read or import, update, deactivate, delete user accounts, and perform group management.\\\\n \\\\n #### Contact information\\\\n-* Company website: https://www.idmworks.com/identity-forge\\\\n+* Company website: https://www.idmworks.com/\\\\n * Contact information: https://www.idmworks.com/contact/\\\\n \\\\n #### Popular applications supported\\\\n \\\\n-Leading provider of Mainframe, Healthcare and ERP integrations. More can be found at https://www.idmworks.com/identity-forge/\\\\n+Leading provider of Mainframe, Healthcare and ERP integrations. More can be found at https://www.idmworks.com/product/identityforge-connectors/\\\\n \\\\n * IBM RACF\\\\n * CA Top Secret\\\"\\r\\n  }\\r\\n]. Please summarise it in a few sentences, using UK grammar and ensure the response is formatted for markdown. Do not start the response with here is summary.\"}",
    "Response": "Here's a summary of the changes:\n\nThe documentation for Microsoft Entra Kerberos has been significantly updated. Key changes include a clearer explanation of how Microsoft Entra ID acts as a cloud-based Key Distribution Center (KDC), and a more detailed breakdown of the authentication flow, including the issuance of Cloud and Partial Ticket Granting Tickets (TGTs). New sections on prerequisites for on-premises access, realm mapping, and security considerations have been added, along with an update to the application integration partners section, specifically for IDMWORKS, with corrected website links and product mentions.",
    "Model": "google:gemini-2.5-flash-lite",
    "Provider": "google",
    "ModelName": "gemini-2.5-flash-lite",
    "Timestamp": "2025-09-16T07:00:50.1059977+00:00"
  },
  "files": [
    {
      "filename": "docs/identity/authentication/kerberos.md",
      "status": "modified",
      "additions": 72,
      "deletions": 31
    },
    {
      "filename": "docs/includes/application-integration-partners.md",
      "status": "modified",
      "additions": 2,
      "deletions": 2
    }
  ]
}