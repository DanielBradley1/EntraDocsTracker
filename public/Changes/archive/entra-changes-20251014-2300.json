[
  {
    "sha": "587a6e091a03cc209355ad9e9ecb268b0c017e36",
    "url": "https://github.com/MicrosoftDocs/entra-docs/commit/587a6e091a03cc209355ad9e9ecb268b0c017e36",
    "author": "learn-build-service-prod[bot]",
    "email": "113403604+learn-build-service-prod[bot]@users.noreply.github.com",
    "date": "2025-10-14T22:12:22Z",
    "message": "Merge pull request #10019 from MicrosoftDocs/main\n\nAuto Publish – main to live - 2025-10-14 22:07 UTC",
    "ai_summary": {
      "Messages": "{\"content\":\"The following is the commit files that have changed: [\\r\\n  {\\r\\n    \\\"sha\\\": \\\"cacb8aa1e6de3e7bb88315977071581acbeb5d6d\\\",\\r\\n    \\\"filename\\\": \\\"docs/external-id/customers/concept-authentication-methods-customers.md\\\",\\r\\n    \\\"status\\\": \\\"modified\\\",\\r\\n    \\\"additions\\\": 21,\\r\\n    \\\"deletions\\\": 16,\\r\\n    \\\"changes\\\": 37,\\r\\n    \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fexternal-id%2Fcustomers%2Fconcept-authentication-methods-customers.md\\\",\\r\\n    \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fexternal-id%2Fcustomers%2Fconcept-authentication-methods-customers.md\\\",\\r\\n    \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fexternal-id%2Fcustomers%2Fconcept-authentication-methods-customers.md?ref=587a6e091a03cc209355ad9e9ecb268b0c017e36\\\",\\r\\n    \\\"patch\\\": \\\"@@ -20,7 +20,7 @@ ms.custom: it-pro, seo-july-2024\\\\n > [!TIP]\\\\n > This article applies to External ID in external tenants. For information about workforce tenants, see [Identity providers for External ID in workforce tenants](../identity-providers.md).\\\\n \\\\n-With Microsoft Entra External ID, you can create secure, customized sign-in experiences for your consumer- and business customer-facing apps. In an external tenant, there are several ways for users to sign up for your app. They can create an account using their email and either a password or a one-time passcode. Or, if you enable sign-in with Facebook, Google, Apple or a custom OIDC or SAML/WS-Fed identity provider (IdP), users can sign in using their credentials in the external identity provider. A user object is created for them in your directory with the identity information collected during sign-up.\\\\n+With Microsoft Entra External ID, you can create secure, customized sign-in experiences for your consumer- and business customer-facing apps. In an external tenant, there are several ways for users to sign up for your app. They can create an account using their email and either a password or a one-time passcode. Or, if you enable sign-in with Facebook, Google, Apple, or a custom OIDC or SAML/WS-Fed identity provider (IdP), users can sign in using their credentials in the external identity provider. A user object is created for them in your directory with the identity information collected during sign-up.\\\\n \\\\n This article describes the identity providers that are available for primary authentication when signing up and signing in to apps in external tenants. You can also enhance security by enforcing a multifactor authentication (MFA) policy that requires a second form of verification each time a user signs in ([learn more](concept-multifactor-authentication-customers.md)).\\\\n \\\\n@@ -52,7 +52,7 @@ You can also configure options for showing, hiding, or customizing the self-serv\\\\n \\\\n When you [create a sign-up and sign-in user flow](how-to-user-flow-sign-up-sign-in-customers.md#create-and-customize-a-user-flow), **Email one-time passcode** is one of the local account options.\\\\n \\\\n-## Social identity providers: Facebook, Google and Apple\\\\n+## Social identity providers: Facebook, Google, and Apple\\\\n \\\\n For an optimal sign-in experience, federate with social identity providers whenever possible so you can give your users a seamless sign-up and sign-in experience. In an external tenant, you can allow a user to sign up and sign in using their own Facebook, Google, or Apple account.\\\\n \\\\n@@ -85,6 +85,12 @@ By setting up federation with Apple, you can allow users to sign in to your appl\\\\n The following screenshots show the sign-in with Apple experience. In the sign-in page, users select **Sign-in with Apple**. Then the user is redirected to the Apple identity provider to complete the sign-in.\\\\n Learn how to [add Apple as an identity provider](how-to-apple-federation-customers.md).\\\\n \\\\n+## Custom OIDC identity provider\\\\n+\\\\n+You can set up a custom OpenID Connect (OIDC) identity provider to allow users to sign up and sign in to your applications using their credentials in the external identity provider. You can also federate your sign-in and sign-up flows with an Azure AD B2C tenant using the OIDC protocol.\\\\n+\\\\n+Learn how to [set up a custom OIDC identity provider](how-to-custom-oidc-federation-customers.md).\\\\n+\\\\n ## Custom SAML/WS-Fed identity providers\\\\n \\\\n You can set up a SAML or WS-Fed identity provider to allow users to sign up and sign in to your applications using their own account with the identity provider. The user can sign up or sign in by selecting the **Sign up with** or **Sign in with** option. They're redirected to the identity provider, and then returned to Microsoft Entra once they successfully sign in. For external tenants, a user's sign-in email doesn't need to match the predefined domains set up during SAML federation. As a result, updating the federation setup by adding, changing, or removing domains won't affect the experience for existing users.\\\\n@@ -93,33 +99,32 @@ A user who enters an email address on the sign-in page that matches a predefined\\\\n \\\\n For more information, see [SAML/WS-Fed identity providers](../direct-federation-overview.md). For detailed setup steps, see [Add federation with SAML/WS-Fed identity providers](../direct-federation.md).\\\\n \\\\n-## Custom OIDC identity provider\\\\n+### Domain acceleration\\\\n \\\\n-You can set up a custom OpenID Connect (OIDC) identity provider to allow users to sign up and sign in to your applications using their credentials in the external identity provider. You can also federate your sign-in and sign-up flows with an Azure AD B2C tenant using the OIDC protocol.\\\\n+When you federate with custom SAML/WS-Fed IdPs, users usually see the Microsoft sign-in page first and then choose their identity provider. These IdPs can be associated with one or more domains. Including the `domain_hint` parameter in the sign-in URL allows users to go directly to the sign-in page for the identity provider associated with the specified domain.\\\\n \\\\n-Learn how to [set up a custom OIDC identity provider](how-to-custom-oidc-federation-customers.md).\\\\n-\\\\n-## Issuer acceleration\\\\n-\\\\n-When you use identity providers such as Facebook, Google, Apple, custom OIDC, or SAML, users usually see the Microsoft sign-in page first. From there, they choose their identity provider. To simplify this experience, you can use the `domain_hint` parameter in the sign-in URL. This parameter lets you skip the Microsoft sign-in page and go directly to the selected identity provider’s sign-in page.\\\\n+For a custom SAML identity provider, use the domain specified in the **Domain name of federating IdP** field in the `domain_hint` syntax: `domain_hint=<domain name of federating idp>`\\\\n \\\\n-### Issuer acceleration for custom OIDC providers\\\\n+:::image type=\\\\\\\"content\\\\\\\" source=\\\\\\\"media/concept-authentication-methods-customers/domain-issuer-saml.png\\\\\\\" alt-text=\\\\\\\"Screenshot showing the domain name of the federating IdP.\\\\\\\":::\\\\n \\\\n-For a custom OIDC identity provider, use the domain part of the **Issuer URI** in the `domain_hint` syntax.\\\\n+## Issuer acceleration\\\\n \\\\n-:::image type=\\\\\\\"content\\\\\\\" source=\\\\\\\"media/concept-authentication-methods-customers/domain-issuer-open-id-connect.png\\\\\\\" alt-text=\\\\\\\"Screenshot showing the domain part of the issuer URI.\\\\\\\":::\\\\n+When you federate with other external identity providers—such as Facebook, Google, Apple, or a custom OpenID Connect IdP, users usually see the Microsoft sign-in page first and then choose their identity provider. Including the `domain_hint` parameter in the sign-in URL allows users to go directly to the sign-in page for the identity provider associated with the specified domain.\\\\n \\\\n-### Issuer acceleration for custom SAML providers\\\\n+You can use the following `domain_hint` values to go directly to the sign-in page for these identity providers:\\\\n \\\\n-For a custom SAML identity provider, use the domain specified in the **Domain name of federating IdP** field in the `domain_hint` syntax.\\\\n+- **Facebook**: `domain_hint=facebook`.  \\\\n+- **Google**: `domain_hint=google`.  \\\\n+- **Apple**: `domain_hint=apple`.\\\\n+- **Custom OIDC**: `domain_hint=<issuer URI>`. For a custom OIDC identity provider, use the domain part of the **Issuer URI** in the `domain_hint` syntax.\\\\n \\\\n-:::image type=\\\\\\\"content\\\\\\\" source=\\\\\\\"media/concept-authentication-methods-customers/domain-issuer-saml.png\\\\\\\" alt-text=\\\\\\\"Screenshot showing the domain name of the federating IdP.\\\\\\\":::\\\\n+   :::image type=\\\\\\\"content\\\\\\\" source=\\\\\\\"media/concept-authentication-methods-customers/domain-issuer-open-id-connect.png\\\\\\\" alt-text=\\\\\\\"Screenshot showing the domain part of the issuer URI.\\\\\\\":::\\\\n \\\\n ## Updating sign-in methods\\\\n \\\\n At any time, you can update the sign-in options for an app. For example, you can add social identity providers or change the local account sign-in method.\\\\n \\\\n-When you change sign-in methods, the change affects only new users. Existing users continue to sign in using their original method. For example, suppose you start out with the email and password sign-in method, and then change to email with one-time passcode. New users sign in using a one-time passcode, but any users who already signed up with an email and password continue to be prompted for their email and password. \\\\n+When you change sign-in methods, the change affects only new users. Existing users continue to sign in using their original method. For example, suppose you start out with the email and password sign-in method, and then change to email with one-time passcode. New users sign in using a one-time passcode, but any users who already signed up with an email and password continue to be prompted for their email and password.\\\\n \\\\n ## Microsoft Graph APIs\\\\n \\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"sha\\\": \\\"1b8f38dcd28bef72be18244eafd564b6f215ba51\\\",\\r\\n    \\\"filename\\\": \\\"docs/external-id/customers/media/concept-authentication-methods-customers/domain-issuer-open-id-connect.png\\\",\\r\\n    \\\"status\\\": \\\"modified\\\",\\r\\n    \\\"additions\\\": 0,\\r\\n    \\\"deletions\\\": 0,\\r\\n    \\\"changes\\\": 0,\\r\\n    \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fexternal-id%2Fcustomers%2Fmedia%2Fconcept-authentication-methods-customers%2Fdomain-issuer-open-id-connect.png\\\",\\r\\n    \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fexternal-id%2Fcustomers%2Fmedia%2Fconcept-authentication-methods-customers%2Fdomain-issuer-open-id-connect.png\\\",\\r\\n    \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fexternal-id%2Fcustomers%2Fmedia%2Fconcept-authentication-methods-customers%2Fdomain-issuer-open-id-connect.png?ref=587a6e091a03cc209355ad9e9ecb268b0c017e36\\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"sha\\\": \\\"fae30b468d329a82a17cb843cc11f8c95993e183\\\",\\r\\n    \\\"filename\\\": \\\"docs/external-id/customers/media/concept-authentication-methods-customers/domain-issuer-saml.png\\\",\\r\\n    \\\"status\\\": \\\"modified\\\",\\r\\n    \\\"additions\\\": 0,\\r\\n    \\\"deletions\\\": 0,\\r\\n    \\\"changes\\\": 0,\\r\\n    \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fexternal-id%2Fcustomers%2Fmedia%2Fconcept-authentication-methods-customers%2Fdomain-issuer-saml.png\\\",\\r\\n    \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fexternal-id%2Fcustomers%2Fmedia%2Fconcept-authentication-methods-customers%2Fdomain-issuer-saml.png\\\",\\r\\n    \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fexternal-id%2Fcustomers%2Fmedia%2Fconcept-authentication-methods-customers%2Fdomain-issuer-saml.png?ref=587a6e091a03cc209355ad9e9ecb268b0c017e36\\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"sha\\\": \\\"a76e5e2a5dcb5e8985188f82685a29e4496fa284\\\",\\r\\n    \\\"filename\\\": \\\"docs/identity/conditional-access/agent-optimization-review-suggestions.md\\\",\\r\\n    \\\"status\\\": \\\"modified\\\",\\r\\n    \\\"additions\\\": 19,\\r\\n    \\\"deletions\\\": 5,\\r\\n    \\\"changes\\\": 24,\\r\\n    \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fidentity%2Fconditional-access%2Fagent-optimization-review-suggestions.md\\\",\\r\\n    \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fidentity%2Fconditional-access%2Fagent-optimization-review-suggestions.md\\\",\\r\\n    \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fidentity%2Fconditional-access%2Fagent-optimization-review-suggestions.md?ref=587a6e091a03cc209355ad9e9ecb268b0c017e36\\\",\\r\\n    \\\"patch\\\": \\\"@@ -5,7 +5,7 @@ ms.author: sarahlipsey\\\\n author: shlipsey3\\\\n ms.reviewer: lhuangnorth\\\\n manager: pmwongera\\\\n-ms.date: 08/25/2025\\\\n+ms.date: 10/09/2025\\\\n ms.update-cycle: 180-days\\\\n ms.service: entra-id\\\\n ms.subservice: conditional-access\\\\n@@ -57,14 +57,24 @@ We want to provide as much information as possible about the logic used to ident\\\\n \\\\n ## Review suggestions and agent logic\\\\n \\\\n-Select **Review suggestion** to review a thorough overview of the suggestion, including the logic used to identify the suggestion and the potential impact of the policy.\\\\n+Select **Review suggestion** to review a thorough overview of the suggestion, including the logic used to identify the suggestion and the potential impact of the policy. The options available in the policy suggestion details vary depending on the type of suggestion. For example, new policy suggestions include a **Turn on policy** button while suggestions to modify an existing policy include an **Add accounts** button to add users or groups to exclude from the policy.\\\\n \\\\n ### Policy details\\\\n \\\\n The default view of the suggestion provides the policy details, including a high-level description at the top followed by the details that are used in the policy.\\\\n \\\\n :::image type=\\\\\\\"content\\\\\\\" source=\\\\\\\"media/agent-optimization-review-suggestions/review-suggestions-details.png\\\\\\\" alt-text=\\\\\\\"Screenshot of the agent with the policy suggestion details open.\\\\\\\" lightbox=\\\\\\\"media/agent-optimization-review-suggestions/review-suggestions-details-expanded.png\\\\\\\":::\\\\n \\\\n+From this view you can make decisions about the suggestion, including:\\\\n+\\\\n+- Turn on a new policy in report-only mode\\\\n+- Apply changes to an existing policy\\\\n+- Mark a suggestion as reviewed\\\\n+- Snooze a suggestion for 14 days\\\\n+- Add notes about the suggestion for other admins to review\\\\n+\\\\n+You can also edit, duplicate, or download the policy from this page. The policy suggestions detail page is detailed and provides every option needed to make an informed decision about the suggestion. But if you need more information, you can also view the policy impact and see details about the agent's activity.\\\\n+\\\\n ### Policy impact\\\\n \\\\n From the details panel that opens, select **Policy impact** to see a visualization of the potential impact of the policy.\\\\n@@ -75,9 +85,13 @@ Adjust the filters and the display as needed. Select a point on the graph to see\\\\n \\\\n To see a detailed summary of the agent's activity and how it calculated the suggestion, select **View agent's full activity**. The agent's activity assesses policy drift, or gaps in policy coverage, for users and apps. The agent also looks for policies that can be merged or consolidated.\\\\n \\\\n-The **Summary of agent activity** is a natural language description of the activity illustrated in the **Agent activity map**. These details can help you understand the logic behind the suggestion so you can make an informed decision about whether to apply the suggestion.\\\\n+:::image type=\\\\\\\"content\\\\\\\" source=\\\\\\\"media/agent-optimization-review-suggestions/agent-activity-detail.png\\\\\\\" alt-text=\\\\\\\"Screenshot of the agent activity map with clickable user list option highlighted.\\\\\\\" lightbox=\\\\\\\"media/agent-optimization-review-suggestions/agent-activity-detail-expanded.png\\\\\\\":::\\\\n+\\\\n+If the policy suggestion includes adding specific users or applications to the policy, you can view the list of applications or users directly from the map. For example, in the following example you'd select the **8 users** link to see the eight users the agent identified as not being included in the policy.\\\\n+\\\\n+:::image type=\\\\\\\"content\\\\\\\" source=\\\\\\\"media/agent-optimization-review-suggestions/agent-activity-map-view-users.png\\\\\\\" alt-text=\\\\\\\"Screenshot of the agent activity map.\\\\\\\" lightbox=\\\\\\\"media/agent-optimization-review-suggestions/agent-activity-map-view-users.png\\\\\\\":::\\\\n \\\\n-:::image type=\\\\\\\"content\\\\\\\" source=\\\\\\\"media/agent-optimization-review-suggestions/agent-activity-detail.png\\\\\\\" alt-text=\\\\\\\"Screenshot of the agent activity map.\\\\\\\" lightbox=\\\\\\\"media/agent-optimization-review-suggestions/agent-activity-detail-expanded.png\\\\\\\":::\\\\n+The **Summary of agent activity** is a natural language description of the activity illustrated in the map. These details can help you understand the logic behind the suggestion so you can make an informed decision about whether to apply the suggestion.\\\\n \\\\n ### Review policy changes\\\\n \\\\n@@ -90,7 +104,7 @@ If the agent suggests modifying an existing policy, select **Review policy chang\\\\n \\\\n Deep analysis performs an in-depth review of Conditional Access policies for scenarios such as blocking legacy authentication, blocking device control flow, and policies that require device or MFA controls. It evaluates the targeted users, groups, and roles to identify coverage gaps, overlapping or redundant policies, and consolidation opportunities. It also analyzes exclusions—flagging policies that exclude a large portion of users and recommending explicit exclusion of break‑glass accounts to reduce the risk of accidental lockout.\\\\n \\\\n-Because the policy suggestions that come through deep analysis might have a significant impact on your environment, you can \\\\\\\"snooze\\\\\\\" the suggestion for 14 days. This feature gives you time to investigate the suggestion and make any needed changes to your policies before applying the suggestion. You can also add notes about the suggestion that can be saved for other admins to review. If you choose to snooze the suggestion, it reappears in the list after 14 days with the notes intact.\\\\n+Because the policy suggestions that come through deep analysis might have a significant impact on your environment, consider using the \\\\\\\"snooze\\\\\\\" option to give you time to investigate the suggestion and make any needed changes to your policies before applying the suggestion. You can also add notes about the suggestion that can be saved for other admins to review. If you choose to snooze the suggestion, it reappears in the list after 14 days with the notes intact.\\\\n \\\\n :::image type=\\\\\\\"content\\\\\\\" source=\\\\\\\"media/agent-optimization-review-suggestions/deep-analysis-suggestion.png\\\\\\\" alt-text=\\\\\\\"Screenshot of the suggestion created with deep analysis with the snooze and notes buttons highlighted.\\\\\\\" lightbox=\\\\\\\"media/agent-optimization-review-suggestions/deep-analysis-suggestion.png\\\\\\\":::\\\\n \\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"sha\\\": \\\"52a021147468a8a8d6bdb6593bc076b49dd5b9d3\\\",\\r\\n    \\\"filename\\\": \\\"docs/identity/conditional-access/agent-optimization.md\\\",\\r\\n    \\\"status\\\": \\\"modified\\\",\\r\\n    \\\"additions\\\": 1,\\r\\n    \\\"deletions\\\": 1,\\r\\n    \\\"changes\\\": 2,\\r\\n    \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fidentity%2Fconditional-access%2Fagent-optimization.md\\\",\\r\\n    \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fidentity%2Fconditional-access%2Fagent-optimization.md\\\",\\r\\n    \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fidentity%2Fconditional-access%2Fagent-optimization.md?ref=587a6e091a03cc209355ad9e9ecb268b0c017e36\\\",\\r\\n    \\\"patch\\\": \\\"@@ -172,7 +172,7 @@ There are several key points to consider regarding the identity and permissions\\\\n \\\\n    :::image type=\\\\\\\"content\\\\\\\" source=\\\\\\\"media/agent-optimization/identity-permissions.png\\\\\\\" alt-text=\\\\\\\"Screenshot of the identity and permissions section in the Conditional Access Optimization agent settings.\\\\\\\" lightbox=\\\\\\\"media/agent-optimization/identity-permissions.png\\\\\\\":::\\\\n \\\\n-### ServiceNow integration\\\\n+### ServiceNow integration (Preview)\\\\n \\\\n Organizations that use the [ServiceNow plugin for Security Copilot](/copilot/security/plugin-servicenow) can now have the Conditional Access optimization agent create ServiceNow change requests for each new suggestion the agent generates. This allows IT and security teams to track, review, and approve or reject agent suggestions within existing ServiceNow workflows. At this time, only change requests (CHG) are supported.\\\\n \\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"sha\\\": \\\"9cf0be22497a255e7e539a0781bce53c7df230e3\\\",\\r\\n    \\\"filename\\\": \\\"docs/identity/conditional-access/media/agent-optimization-review-suggestions/agent-activity-map-view-users.png\\\",\\r\\n    \\\"status\\\": \\\"added\\\",\\r\\n    \\\"additions\\\": 0,\\r\\n    \\\"deletions\\\": 0,\\r\\n    \\\"changes\\\": 0,\\r\\n    \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fidentity%2Fconditional-access%2Fmedia%2Fagent-optimization-review-suggestions%2Fagent-activity-map-view-users.png\\\",\\r\\n    \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fidentity%2Fconditional-access%2Fmedia%2Fagent-optimization-review-suggestions%2Fagent-activity-map-view-users.png\\\",\\r\\n    \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fidentity%2Fconditional-access%2Fmedia%2Fagent-optimization-review-suggestions%2Fagent-activity-map-view-users.png?ref=587a6e091a03cc209355ad9e9ecb268b0c017e36\\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"sha\\\": \\\"a9b5d00b92f80fa96dda07dbe95197fed54fff28\\\",\\r\\n    \\\"filename\\\": \\\"docs/identity/domain-services/TOC.yml\\\",\\r\\n    \\\"status\\\": \\\"modified\\\",\\r\\n    \\\"additions\\\": 2,\\r\\n    \\\"deletions\\\": 0,\\r\\n    \\\"changes\\\": 2,\\r\\n    \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fidentity%2Fdomain-services%2FTOC.yml\\\",\\r\\n    \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fidentity%2Fdomain-services%2FTOC.yml\\\",\\r\\n    \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fidentity%2Fdomain-services%2FTOC.yml?ref=587a6e091a03cc209355ad9e9ecb268b0c017e36\\\",\\r\\n    \\\"patch\\\": \\\"@@ -89,6 +89,8 @@\\\\n           href: change-sku.md\\\\n         - name: Retrieve data\\\\n           href: how-to-data-retrieval.md\\\\n+        - name: Restore group policy from backup\\\\n+          href: group-policy.md\\\\n     - name: Secure Domain Services\\\\n       items:\\\\n         - name: Secure your managed domain\\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"sha\\\": \\\"92a89344745892c507db4d5fe92a6dd4288fccfa\\\",\\r\\n    \\\"filename\\\": \\\"docs/identity/domain-services/group-policy.md\\\",\\r\\n    \\\"status\\\": \\\"added\\\",\\r\\n    \\\"additions\\\": 368,\\r\\n    \\\"deletions\\\": 0,\\r\\n    \\\"changes\\\": 368,\\r\\n    \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fidentity%2Fdomain-services%2Fgroup-policy.md\\\",\\r\\n    \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fidentity%2Fdomain-services%2Fgroup-policy.md\\\",\\r\\n    \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fidentity%2Fdomain-services%2Fgroup-policy.md?ref=587a6e091a03cc209355ad9e9ecb268b0c017e36\\\",\\r\\n    \\\"patch\\\": \\\"@@ -0,0 +1,368 @@\\\\n+---\\\\n+title: Restore group policy objects from backups in Microsoft Entra Domain Services | Microsoft Docs\\\\n+description: Learn how to restore group policy objects in a Microsoft Entra Domain Services managed domain.\\\\n+author: JamesNyamu\\\\n+\\\\n+ms.service: entra-id\\\\n+ms.author: janyamu\\\\n+ms.topic: how-to\\\\n+ms.date: 10/07/2025\\\\n+---\\\\n+\\\\n+# Group Policy\\\\n+\\\\n+Group Policy Objects (GPOs) are collections of policy settings that define how computer systems and user accounts behave within a Windows Active Directory domain environment. GPOs serve as the primary mechanism for centralized configuration management, security enforcement, and administrative control across Windows networks.\\\\n+\\\\n+## Backup Feature Overview\\\\n+\\\\n+The Group Policy Backup feature is a new capability added to the Domain Health Monitor that automatically creates and manages backups of Group Policy Objects (GPOs) in Active Directory Domain Services. This feature helps ensure business continuity and disaster recovery by maintaining regular backups of critical group policies.\\\\n+\\\\n+## File System Structure\\\\n+\\\\n+### Backup Location\\\\n+\\\\n+- **Primary Path**: `F:\\\\\\\\\\\\\\\\GPO\\\\\\\\\\\\\\\\Backups`\\\\n+\\\\n+- **Network Share**: `GPOBackupsShare$` (hidden share)\\\\n+\\\\n+### Directory Structure\\\\n+\\\\n+```\\\\n+F:\\\\\\\\GPO\\\\\\\\Backups\\\\\\\\\\\\n+\\\\n+├── MMddyyyyHHmm\\\\\\\\          # Timestamp folder (e.g., 092520251430)\\\\n+\\\\n+│   ├── {GUID-1}\\\\\\\\          # Individual GPO backup folder\\\\n+\\\\n+│   ├── {GUID-2}\\\\\\\\          # Individual GPO backup folder\\\\n+\\\\n+│   └── ...\\\\n+\\\\n+├── MMddyyyyHHmm\\\\\\\\          # Previous backup\\\\n+\\\\n+│   └── ...\\\\n+\\\\n+└── ...\\\\n+```\\\\n+\\\\n+## Functionality\\\\n+\\\\n+#### Network Share Creation\\\\n+\\\\n+Creates an encrypted SMB (Server Message Block) share with the following characteristics:\\\\n+\\\\n+- **Share Name**: `GPOBackupsShare$` (hidden)\\\\n+- **Encryption**: Enabled for security\\\\n+- **Permissions**:\\\\n+  - **Full Access**: Domain Admins\\\\n+  - **Read Access**: AAD (Azure Active Directory) DC Admins\\\\n+\\\\n+## Security Considerations\\\\n+\\\\n+### Permissions\\\\n+\\\\n+- **Folder Permissions**: \\\\n+  - Domain Admins: Full Control\\\\n+  - AAD DC Admins: Read Access\\\\n+\\\\n+- **Share Permissions**: \\\\n+  - Encrypted SMB share for network access\\\\n+  - Hidden share (`$` suffix) for security through obscurity\\\\n+\\\\n+### Access Control\\\\n+\\\\n+The backup location and network share are configured with appropriate Active Directory security groups to ensure only authorized administrators can access the backup data.\\\\n+\\\\n+## Usage Examples\\\\n+\\\\n+### Verifying Backups\\\\n+\\\\n+```powershell\\\\n+# Check backup location\\\\n+Get-ChildItem \\\\\\\"F:\\\\\\\\GPO\\\\\\\\Backups\\\\\\\" -Directory\\\\n+\\\\n+# Access via network share (from another machine)\\\\n+Get-ChildItem \\\\\\\"\\\\\\\\\\\\\\\\PDC-SERVER\\\\\\\\GPOBackupsShare$\\\\\\\"\\\\n+```\\\\n+\\\\n+### Manual Cleanup\\\\n+\\\\n+```powershell\\\\n+# The feature handles cleanup automatically, but for manual operations:\\\\n+Get-ChildItem \\\\\\\"F:\\\\\\\\\\\\\\\\GPO\\\\\\\\Backups\\\\\\\" | Where-Object { $\\\\\\\\_.CreationTime -lt (Get-Date).AddDays(-7) } | Remove-Item -Recurse -Force\\\\n+```\\\\n+\\\\n+This section describes how an administrator on a domain-joined computer can discover, access, and restore Group Policy Object (GPO) backups created by this feature. Both GUI (GPMC) and PowerShell workflows are provided.\\\\n+\\\\n+### Prerequisites\\\\n+\\\\n+- You have network connectivity to at least one writable domain controller (ideally the PDC (Primary Domain Controller) Emulator).\\\\n+- Your account is a member of a group with rights to read (AAD DC Admins) or modify (Domain Admins) GPOs.\\\\n+- RSAT (Remote Server Administration Tools) Group Policy Management Console (GPMC) installed (for GUI restoration).\\\\n+- PowerShell `GroupPolicy` module available (shipped with RSAT / on domain controllers by default).\\\\n+\\\\n+### Determining the PDC Emulator (If Needed)\\\\n+\\\\n+Although the code attempts to resolve and publish the share on the PDC, you can explicitly discover the PDC Emulator using either:\\\\n+\\\\n+```powershell\\\\n+Get-ADDomain | Select-Object PDCEmulator\\\\n+```\\\\n+\\\\n+Or (legacy / without AD module):\\\\n+\\\\n+```\\\\n+nltest /dsgetdc:<yourDomainFQDN> /pdc\\\\n+```\\\\n+\\\\n+Take the short hostname (left of the first dot) for UNC (Universal Naming Convention) paths.\\\\n+\\\\n+### Accessing the Backup Share (Domain-Joined Workstation)\\\\n+\\\\n+1. Press Win+R, enter a UNC path:\\\\n+\\\\n+```powershell\\\\n+\\\\\\\\\\\\\\\\<PDCShortName>\\\\\\\\GPOBackupsShare$\\\\n+```\\\\n+\\\\n+2. (Optional) Map a drive letter:\\\\n+\\\\n+```powershell\\\\n+New-PSDrive -Name GPOBK -PSProvider FileSystem -Root \\\\\\\"\\\\\\\\\\\\\\\\<PDCShortName>\\\\\\\\GPOBackupsShare$\\\\\\\" -Persist\\\\n+```\\\\n+\\\\n+3. Browse timestamp folders (format `MMddyyyyHHmm`). Each subfolder contains GUID-named folders for each backed-up GPO.\\\\n+\\\\n+### Backup Folder Layout Recap\\\\n+\\\\n+```powershell\\\\n+\\\\\\\\\\\\\\\\<PDCShortName>\\\\\\\\GPOBackupsShare$\\\\\\\\<TimestampFolder>\\\\\\\\{GPO-GUID}\\\\\\\\\\\\n+  +-- backup.xml          (metadata, if present)\\\\n+  +-- GPO.tmf / Gpt.ini / Machine / User  (typical structural contents)\\\\n+  +-- (Optional manifest files depending on API)\\\\n+```\\\\n+\\\\n+> [!NOTE]\\\\n+> The exact file set may vary depending on the provider implementation, but a GUID folder per GPO is the key identity.\\\\n+\\\\n+### Identifying the Correct Backup\\\\n+\\\\n+You can correlate a GUID to a friendly GPO name:\\\\n+\\\\n+```powershell\\\\n+Get-GPO -All | Where-Object Id -eq '{GUID-HERE}' | Select DisplayName, Id\\\\n+```\\\\n+\\\\n+Or search by name across GUID folders (if `backup.xml` or `gpreport.xml` exists):\\\\n+\\\\n+```powershell\\\\n+Get-ChildItem \\\\\\\"\\\\\\\\\\\\\\\\<PDCShortName>\\\\\\\\GPOBackupsShare$\\\\\\\" -Directory -Recurse -Depth 2 | Where-Object { Test-Path (Join-Path $\\\\\\\\_.FullName 'backup.xml') } |\\\\n+  ForEach-Object {\\\\n+    [xml]$meta = Get-Content (Join-Path $\\\\\\\\_.FullName 'backup.xml') -ErrorAction SilentlyContinue\\\\n+\\\\n+    if ($meta.BackupInformation.GPOName) {\\\\n+      [pscustomobject]@{ Folder=$\\\\\\\\_.FullName; GPOName=$meta.BackupInformation.GPOName; GPOId=$meta.BackupInformation.GPOID }\\\\n+    }\\\\n+  }\\\\n+```\\\\n+\\\\n+If metadata is absent, rely on the GPO GUID from production (`Get-GPO -All`).\\\\n+\\\\n+### Restoring a GPO via GUI (GPMC)\\\\n+\\\\n+1. Launch \\\\\\\"Group Policy Management\\\\\\\" (GPMC.msc).\\\\n+\\\\n+2. In the left tree, right-click the **Group Policy Objects** container (or an individual GPO if performing an in-place restore).\\\\n+\\\\n+3. Choose **Manage Backups…**.\\\\n+\\\\n+4. Click **Browse** and select the timestamp folder path:\\\\n+\\\\n+```powershell\\\\n+\\\\\\\\\\\\\\\\<PDCShortName>\\\\\\\\GPOBackupsShare$\\\\\\\\<TimestampFolder>\\\\n+```\\\\n+\\\\n+5. The list populates with discoverable backups. Select the target GPO backup.\\\\n+\\\\n+6. Decide between:\\\\n+\\\\n+    - **Restore**: Overwrites the existing GPO (matching GUID) in-place.\\\\n+    - **Restore To…**: Lets you restore to a *different* GPO (choose existing target).\\\\n+    - **Copy** (if available): Create a new GPO from backup (GUID changes; links must be re-established manually).\\\\n+\\\\n+7. Confirm the operation. Review the results pane for success/failure.\\\\n+\\\\n+8. Relink or validate security filtering / WMI (Windows Management Instrumentation) filters as needed (see below).\\\\n+\\\\n+#### Post-Restore Validation\\\\n+\\\\n+- Run: `gpresult /h report.html` on a target workstation to confirm policy application.\\\\n+- Use **GPO Status** in GPMC to ensure both User and Computer portions are enabled.\\\\n+- Validate WMI filter association (WMI filters are not always embedded inside raw file-level backups and may need reassociation).\\\\n+\\\\n+### Restoring a GPO via PowerShell\\\\n+\\\\n+The `GroupPolicy` module provides `Restore-GPO`, `Import-GPO`, and `New-GPO` for different scenarios.\\\\n+\\\\n+#### 1. In-Place Restore (Same GUID)\\\\n+\\\\n+```powershell\\\\n+$timestampFolder = '092520251430'              # Example\\\\n+\\\\n+$pdc = (Get-ADDomain).PDCEmulator.Split('.')[0]\\\\n+\\\\n+$backupRoot = \\\\\\\"\\\\\\\\\\\\\\\\<PDCShortName>\\\\\\\\GPOBackupsShare$\\\\\\\\$timestampFolder\\\\\\\"\\\\n+\\\\n+# List available backups in that timestamp folder\\\\n+Get-GPOBackup -Path $backupRoot | Format-Table DisplayName, Id, CreationTime\\\\n+\\\\n+# Restore specific GPO by name (must already exist in domain)\\\\n+Restore-GPO -Name 'My Application Baseline' -Path $backupRoot -Confirm:$false\\\\n+```\\\\n+\\\\n+#### 2. Restore When Original GPO Was Deleted\\\\n+\\\\n+If the original GPO (GUID) is gone, you have two options:\\\\n+    \\\\n+1. Recreate with Original GUID (Only if you know the GUID and want to keep it):\\\\n+\\\\n+```powershell\\\\n+  $backup = Get-GPOBackup -Path $backupRoot | Where-Object { $\\\\\\\\_.DisplayName -eq 'My Application Baseline' }\\\\n+  \\\\n+  Restore-GPO -Guid $backup.Id -Path $backupRoot -CreateIfNeeded\\\\n+```\\\\n+\\\\n+2. Option B – Create a New GPO and Import Settings:\\\\n+\\\\n+```powershell\\\\n+  $newGpo = New-GPO -Name 'My Application Baseline (Restored)'\\\\n+  \\\\n+  Import-GPO -TargetName $newGpo.DisplayName -BackupId $backup.Id -Path $backupRoot -CreateIfNeeded\\\\n+```\\\\n+\\\\n+#### 3. Select Backup by GUID Only\\\\n+\\\\n+```powershell\\\\n+$gpoGuid = '{12345678-90AB-CDEF-1234-567890ABCDEF}'\\\\n+\\\\n+Restore-GPO -Guid $gpoGuid -Path $backupRoot -Confirm:$false\\\\n+```\\\\n+\\\\n+#### 4. Copy Backup to a New GPO (Preserve Original for Forensics)\\\\n+\\\\n+```powershell\\\\n+$backup = Get-GPOBackup -Path $backupRoot | Where-Object DisplayName -eq 'Legacy GPO'\\\\n+\\\\n+$copy = New-GPO -Name \\\\\\\"Recovered - $($backup.DisplayName)\\\\\\\"\\\\n+\\\\n+Import-GPO -BackupId $backup.Id -TargetName $copy.DisplayName -Path $backupRoot\\\\n+```\\\\n+\\\\n+#### 5. Cross-Domain / Lab Import\\\\n+\\\\n+Copy the entire timestamp folder to the target domain's admin workstation (retain structure) and run:\\\\n+\\\\n+```powershell\\\\n+Get-GPOBackup -Path 'C:\\\\\\\\Temp\\\\\\\\GPOBackups\\\\\\\\092520251430' | ForEach-Object {\\\\n+\\\\n+  $existing = Get-GPO -All | Where-Object Id -eq $\\\\\\\\_.Id -ErrorAction SilentlyContinue\\\\n+\\\\n+  if ($existing) {\\\\n+    Restore-GPO -Guid $\\\\\\\\_.Id -Path 'C:\\\\\\\\Temp\\\\\\\\GPOBackups\\\\\\\\092520251430' -Confirm:$false\\\\n+  } else {\\\\n+    New-GPO -Name $\\\\\\\\_.DisplayName | Out-Null\\\\n+\\\\n+    Import-GPO -BackupId $\\\\\\\\_.Id -TargetName $\\\\\\\\_.DisplayName -Path 'C:\\\\\\\\Temp\\\\\\\\GPOBackups\\\\\\\\092520251430'\\\\n+  }\\\\n+}\\\\n+```\\\\n+\\\\n+> [!NOTE]\\\\n+> Ensure any domain-specific security principals inside the GPO (delegation ACLs, group SIDs (Security Identifier) in preferences) are reviewed after cross-domain imports.\\\\n+\\\\n+### Handling Linked Objects and Dependencies\\\\n+\\\\n+Restoring raw GPO content does *not* automatically:\\\\n+\\\\n+- Relink the GPO to OUs (links are preserved for in-place restore; new GPOs need manual linking).\\\\n+\\\\n+- Recreate WMI filters (must exist; reassign if lost).\\\\n+\\\\n+- Rebuild security filtering if domain SIDs differ (in cross-domain scenarios).\\\\n+\\\\n+#### ReLinking Example\\\\n+\\\\n+```powershell\\\\n+New-GPLink -Name 'My Application Baseline (Restored)' -Target 'OU=Workstations,DC=contoso,DC=com' -Enforced:$false\\\\n+```\\\\n+\\\\n+#### Re-Associate WMI Filter\\\\n+\\\\n+```powershell\\\\n+Set-GPWmiFilter -Guid '{RESTORED-GPO-GUID}' -WmiFilter (Get-GPWmiFilter -All | Where-Object Name -eq 'Win11Only')\\\\n+```\\\\n+\\\\n+### Verification and Reporting\\\\n+\\\\n+To confirm settings, generate an HTML report:\\\\n+\\\\n+```powershell\\\\n+Get-GPO -Name 'My Application Baseline' | Get-GPOReport -ReportType Html -Path .\\\\\\\\BaselineReport.html\\\\n+\\\\n+Start-Process .\\\\\\\\BaselineReport.html\\\\n+```\\\\n+\\\\n+Force a client to refresh and inspect Resultant Set of Policy (RSoP):\\\\n+\\\\n+```powershell\\\\n+Invoke-GPUpdate -Computer 'CLIENT01' -RandomDelayInMinutes 0\\\\n+```\\\\n+\\\\n+### Rollback Strategy\\\\n+\\\\n+If a restored GPO introduces issues:\\\\n+\\\\n+1. Use another (earlier) timestamp folder and rerun `Restore-GPO` with that backup.\\\\n+\\\\n+2. Or disable the GPO (set both User and Computer configurations to Disabled) while investigating.\\\\n+\\\\n+3. To ensure easy rollback path, maintain at least two recent timestamp folders.\\\\n+\\\\n+### Common Restoration Pitfalls\\\\n+\\\\n+| Issue | Cause | Resolution |\\\\n+|-------|-------|-----------|\\\\n+| `Get-GPOBackup` returns nothing | Wrong path depth (pointed at root instead of timestamp folder) | Point `-Path` to specific timestamp folder, not higher-level parent |\\\\n+| `Access denied` on share | Missing group membership or blocked firewall | Confirm membership in Domain Admins / AAD DC Admins; verify SMB inbound rules |\\\\n+| GPO links missing after import | Used Import-GPO to new GPO | Re-create links manually with `New-GPLink` |\\\\n+| WMI filter missing | Not included / not recreated | Recreate filter in GPMC and reassign |\\\\n+| Security filtering ineffective | SID mismatch (cross-domain) | readd groups from target domain |\\\\n+\\\\n+### Minimal End-to-End PowerShell Example\\\\n+\\\\n+```powershell\\\\n+# Variables\\\\n+\\\\n+$pdc = (Get-ADDomain).PDCEmulator.Split('.')[0]\\\\n+\\\\n+$latestTimestamp = Get-ChildItem \\\\\\\"\\\\\\\\\\\\\\\\<PDCShortName>\\\\\\\\GPOBackupsShare$\\\\\\\" -Directory | Sort-Object Name -Descending | Select-Object -First 1 -ExpandProperty Name\\\\n+\\\\n+$backupPath = \\\\\\\"\\\\\\\\\\\\\\\\<PDCShortName>\\\\\\\\GPOBackupsShare$\\\\\\\\$latestTimestamp\\\\\\\"\\\\n+\\\\n+$gpoName = 'Baseline Workstation Policy'\\\\n+\\\\n+# Inspect backups\\\\n+Get-GPOBackup -Path $backupPath | Where-Object DisplayName -eq $gpoName\\\\n+\\\\n+# Restore (in-place)\\\\n+Restore-GPO -Name $gpoName -Path $backupPath -Confirm:$false\\\\n+\\\\n+# Report\\\\n+Get-GPO -Name $gpoName | Get-GPOReport -ReportType Html -Path .\\\\\\\\Restored.html\\\\n+\\\\n+Start-Process .\\\\\\\\Restored.html\\\\n+```\\\\n+\\\\n+---\\\\n+\\\\n+With these procedures, administrators can reliably identify, retrieve, and restore GPO backups whether performing routine recovery, migration to a lab, or emergency rollback.\\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"sha\\\": \\\"9db429a4f865096c6f5116f24af8060dcd1c0d12\\\",\\r\\n    \\\"filename\\\": \\\"docs/identity/domain-services/index.yml\\\",\\r\\n    \\\"status\\\": \\\"modified\\\",\\r\\n    \\\"additions\\\": 2,\\r\\n    \\\"deletions\\\": 0,\\r\\n    \\\"changes\\\": 2,\\r\\n    \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fidentity%2Fdomain-services%2Findex.yml\\\",\\r\\n    \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fidentity%2Fdomain-services%2Findex.yml\\\",\\r\\n    \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fidentity%2Fdomain-services%2Findex.yml?ref=587a6e091a03cc209355ad9e9ecb268b0c017e36\\\",\\r\\n    \\\"patch\\\": \\\"@@ -72,6 +72,8 @@ landingContent:\\\\n             url: notifications.md\\\\n           - text: Enable security audits\\\\n             url: security-audit-events.md\\\\n+          - text: Restore group policy from backup\\\\n+            url: group-policy.md\\\\n   - title: Domain-join VMs\\\\n     linkLists:\\\\n       - linkListType: tutorial\\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"sha\\\": \\\"c43a42b598140e99ee2b696d705bc777a528eccc\\\",\\r\\n    \\\"filename\\\": \\\"docs/identity/hybrid/cloud-sync/how-to-prerequisites.md\\\",\\r\\n    \\\"status\\\": \\\"modified\\\",\\r\\n    \\\"additions\\\": 19,\\r\\n    \\\"deletions\\\": 3,\\r\\n    \\\"changes\\\": 22,\\r\\n    \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fidentity%2Fhybrid%2Fcloud-sync%2Fhow-to-prerequisites.md\\\",\\r\\n    \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fidentity%2Fhybrid%2Fcloud-sync%2Fhow-to-prerequisites.md\\\",\\r\\n    \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fidentity%2Fhybrid%2Fcloud-sync%2Fhow-to-prerequisites.md?ref=587a6e091a03cc209355ad9e9ecb268b0c017e36\\\",\\r\\n    \\\"patch\\\": \\\"@@ -21,11 +21,27 @@ This article provides guidance on using Microsoft Entra Cloud Sync as your ident\\\\n You need the following to use Microsoft Entra Cloud Sync:\\\\n \\\\n - Domain Administrator or Enterprise Administrator credentials to create the Microsoft Entra Connect cloud sync gMSA (group managed service account) to run the agent service.\\\\n+\\\\n - A Hybrid Identity Administrator account for your Microsoft Entra tenant that isn't a guest user.\\\\n-- An on-premises server for the provisioning agent that runs Windows Server 2022, Windows Server 2019, or Windows Server 2016. This server should be a tier 0 server based on the [Active Directory administrative tier model](/security/privileged-access-workstations/privileged-access-access-model). Installing the agent on a domain controller is supported.  For more information, see [Harden your Microsoft Entra provisioning agent server](#harden-your-microsoft-entra-provisioning-agent-server)\\\\n \\\\n-  - Required for AD Schema attribute  - msDS-ExternalDirectoryObjectId\\\\n-    \\\\n+- Microsoft Entra Cloud Sync agent must be installed on a domain-joined server that runs Windows Server 2022, Windows Server 2019, or Windows Server 2016. We recommend Windows Server 2022. You can deploy Microsoft Entra Cloud Sync on Windows Server 2016, but since it's in extended support, you might need [a paid support program](/lifecycle/policies/fixed#extended-support) if you require support for this configuration. Installing on unsupported versions of Windows Server may cause service failures or unexpected behavior.\\\\n+\\\\n+- This server should be a tier 0 server based on the [Active Directory administrative tier model](/security/privileged-access-workstations/privileged-access-access-model). Installing the agent on a domain controller is supported.  For more information, see [Harden your Microsoft Entra provisioning agent server](#harden-your-microsoft-entra-provisioning-agent-server)\\\\n+\\\\n+  >[!IMPORTANT]\\\\n+  >**Windows Server 2025 is NOT supported. There is a known issue on Windows server 2025 with the [KB5065426](https://support.microsoft.com/en-us/topic/september-9-2025-kb5065426-os-build-26100-6584-77a41d9b-1b7c-4198-b9a5-3c4b6706dea9) update installed that will cause Microsoft Entra Connect Sync to encounter sync issues.** If you upgraded to Windows Server 2025 and installed update [KB5065426](https://support.microsoft.com/en-us/topic/september-9-2025-kb5065426-os-build-26100-6584-77a41d9b-1b7c-4198-b9a5-3c4b6706dea9), apply the following registry key as soon as possible to avoid sync disruption.\\\\n+  >\\\\n+  >```\\\\n+  >Windows Registry Editor Version 5.00\\\\n+  >\\\\n+  >[HKEY_LOCAL_MACHINE\\\\\\\\SYSTEM\\\\\\\\CurrentControlSet\\\\\\\\Policies\\\\\\\\Microsoft\\\\\\\\FeatureManagement\\\\\\\\Overrides]\\\\n+  >\\\\\\\"2362988687\\\\\\\"=dword:00000000\\\\n+  >```\\\\n+  >\\\\n+  >This registry modification is a workaround. Windows Server 2025 support for Microsoft Entra Cloud Sync is planned for a future release.\\\\n+\\\\n+- The Active Directory Schema is required to have the attribute msDS-ExternalDirectoryObjectId, which is available in Windows Server 2016 and later.\\\\n+\\\\n - The Windows Credential Manager service (VaultSvc) cannot be disabled as that prevents the provisioning agent from installing.\\\\n \\\\n - High availability refers to the Microsoft Entra Cloud Sync's ability to operate continuously without failure for a long time. By having multiple active agents installed and running, Microsoft Entra Cloud Sync can continue to function even if one agent should fail. Microsoft recommends having 3 active agents installed for high availability.\\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"sha\\\": \\\"9b8fb5158ad327980854abd41fc58bde74ad74c3\\\",\\r\\n    \\\"filename\\\": \\\"docs/identity/hybrid/connect/how-to-connect-install-prerequisites.md\\\",\\r\\n    \\\"status\\\": \\\"modified\\\",\\r\\n    \\\"additions\\\": 4,\\r\\n    \\\"deletions\\\": 4,\\r\\n    \\\"changes\\\": 8,\\r\\n    \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fidentity%2Fhybrid%2Fconnect%2Fhow-to-connect-install-prerequisites.md\\\",\\r\\n    \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/587a6e091a03cc209355ad9e9ecb268b0c017e36/docs%2Fidentity%2Fhybrid%2Fconnect%2Fhow-to-connect-install-prerequisites.md\\\",\\r\\n    \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fidentity%2Fhybrid%2Fconnect%2Fhow-to-connect-install-prerequisites.md?ref=587a6e091a03cc209355ad9e9ecb268b0c017e36\\\",\\r\\n    \\\"patch\\\": \\\"@@ -69,10 +69,10 @@ To read more about securing your Active Directory environment, see [Best practic\\\\n   >**Windows Server 2025 is NOT supported. There is a known issue on Windows server 2025 with the [KB5065426](https://support.microsoft.com/en-us/topic/september-9-2025-kb5065426-os-build-26100-6584-77a41d9b-1b7c-4198-b9a5-3c4b6706dea9) update installed that will cause Microsoft Entra Connect Sync to encounter sync issues.** If you upgraded to Windows Server 2025 and installed update [KB5065426](https://support.microsoft.com/en-us/topic/september-9-2025-kb5065426-os-build-26100-6584-77a41d9b-1b7c-4198-b9a5-3c4b6706dea9), apply the following registry key as soon as possible to avoid sync disruption.\\\\n   >\\\\n   >```\\\\n-  >Path: Computer\\\\\\\\HKEY_LOCAL_MACHINE\\\\\\\\SYSTEM\\\\\\\\CurrentControlSet\\\\\\\\Policies\\\\\\\\Microsoft\\\\\\\\FeatureManagement\\\\\\\\Overrides\\\\n-  >Name: 2362988687\\\\n-  >Type: REG_DWORD\\\\n-  >Value: 0\\\\n+  >Windows Registry Editor Version 5.00\\\\n+  >\\\\n+  >[HKEY_LOCAL_MACHINE\\\\\\\\SYSTEM\\\\\\\\CurrentControlSet\\\\\\\\Policies\\\\\\\\Microsoft\\\\\\\\FeatureManagement\\\\\\\\Overrides]\\\\n+  >\\\\\\\"2362988687\\\\\\\"=dword:00000000\\\\n   >```\\\\n   >\\\\n   >This registry modification is a workaround. Windows Server 2025 support for Microsoft Entra Connect Sync is planned for a future release.\\\"\\r\\n  }\\r\\n]. Please summarise it in a few sentences, using UK grammar and ensure the response is formatted for markdown. Do not start the response with here is summary.\",\"role\":\"user\"}",
      "Response": "Here's a summary of the recent changes:\n\nUpdates have been made to the Microsoft Entra documentation. This includes enhancements to the external ID customer authentication methods, detailing social and custom identity providers, as well as improvements to the Conditional Access agent's review suggestions and policy impact analysis. Additionally, new documentation has been added for restoring Group Policy Objects from backups in Microsoft Entra Domain Services, and prerequisites for Microsoft Entra Cloud Sync and Microsoft Entra Connect have been updated, including crucial information regarding Windows Server 2025 compatibility.",
      "Model": "google:gemini-2.5-flash-lite",
      "Provider": "google",
      "ModelName": "gemini-2.5-flash-lite",
      "Timestamp": "2025-10-14T23:00:39.3990802+00:00"
    },
    "files": [
      {
        "filename": "docs/external-id/customers/concept-authentication-methods-customers.md",
        "status": "modified",
        "additions": 21,
        "deletions": 16
      },
      {
        "filename": "docs/external-id/customers/media/concept-authentication-methods-customers/domain-issuer-open-id-connect.png",
        "status": "modified",
        "additions": 0,
        "deletions": 0
      },
      {
        "filename": "docs/external-id/customers/media/concept-authentication-methods-customers/domain-issuer-saml.png",
        "status": "modified",
        "additions": 0,
        "deletions": 0
      },
      {
        "filename": "docs/identity/conditional-access/agent-optimization-review-suggestions.md",
        "status": "modified",
        "additions": 19,
        "deletions": 5
      },
      {
        "filename": "docs/identity/conditional-access/agent-optimization.md",
        "status": "modified",
        "additions": 1,
        "deletions": 1
      },
      {
        "filename": "docs/identity/conditional-access/media/agent-optimization-review-suggestions/agent-activity-map-view-users.png",
        "status": "added",
        "additions": 0,
        "deletions": 0
      },
      {
        "filename": "docs/identity/domain-services/TOC.yml",
        "status": "modified",
        "additions": 2,
        "deletions": 0
      },
      {
        "filename": "docs/identity/domain-services/group-policy.md",
        "status": "added",
        "additions": 368,
        "deletions": 0
      },
      {
        "filename": "docs/identity/domain-services/index.yml",
        "status": "modified",
        "additions": 2,
        "deletions": 0
      },
      {
        "filename": "docs/identity/hybrid/cloud-sync/how-to-prerequisites.md",
        "status": "modified",
        "additions": 19,
        "deletions": 3
      },
      {
        "filename": "docs/identity/hybrid/connect/how-to-connect-install-prerequisites.md",
        "status": "modified",
        "additions": 4,
        "deletions": 4
      }
    ]
  },
  {
    "sha": "3ca3ad0f5063bfc5b62479761d7d54346dc5d9d6",
    "url": "https://github.com/MicrosoftDocs/entra-docs/commit/3ca3ad0f5063bfc5b62479761d7d54346dc5d9d6",
    "author": "prmerger-automator[bot]",
    "email": "40007230+prmerger-automator[bot]@users.noreply.github.com",
    "date": "2025-10-14T21:48:28Z",
    "message": "Merge pull request #10018 from NuAlex/docs-editor/how-to-connect-install-prerequ-1760474284\n\nUpdate how-to-connect-install-prerequisites.md",
    "ai_summary": {
      "Messages": "{\"content\":\"The following is the commit files that have changed: {\\r\\n  \\\"sha\\\": \\\"9b8fb5158ad327980854abd41fc58bde74ad74c3\\\",\\r\\n  \\\"filename\\\": \\\"docs/identity/hybrid/connect/how-to-connect-install-prerequisites.md\\\",\\r\\n  \\\"status\\\": \\\"modified\\\",\\r\\n  \\\"additions\\\": 4,\\r\\n  \\\"deletions\\\": 4,\\r\\n  \\\"changes\\\": 8,\\r\\n  \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/3ca3ad0f5063bfc5b62479761d7d54346dc5d9d6/docs%2Fidentity%2Fhybrid%2Fconnect%2Fhow-to-connect-install-prerequisites.md\\\",\\r\\n  \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/3ca3ad0f5063bfc5b62479761d7d54346dc5d9d6/docs%2Fidentity%2Fhybrid%2Fconnect%2Fhow-to-connect-install-prerequisites.md\\\",\\r\\n  \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fidentity%2Fhybrid%2Fconnect%2Fhow-to-connect-install-prerequisites.md?ref=3ca3ad0f5063bfc5b62479761d7d54346dc5d9d6\\\",\\r\\n  \\\"patch\\\": \\\"@@ -69,10 +69,10 @@ To read more about securing your Active Directory environment, see [Best practic\\\\n   >**Windows Server 2025 is NOT supported. There is a known issue on Windows server 2025 with the [KB5065426](https://support.microsoft.com/en-us/topic/september-9-2025-kb5065426-os-build-26100-6584-77a41d9b-1b7c-4198-b9a5-3c4b6706dea9) update installed that will cause Microsoft Entra Connect Sync to encounter sync issues.** If you upgraded to Windows Server 2025 and installed update [KB5065426](https://support.microsoft.com/en-us/topic/september-9-2025-kb5065426-os-build-26100-6584-77a41d9b-1b7c-4198-b9a5-3c4b6706dea9), apply the following registry key as soon as possible to avoid sync disruption.\\\\n   >\\\\n   >```\\\\n-  >Path: Computer\\\\\\\\HKEY_LOCAL_MACHINE\\\\\\\\SYSTEM\\\\\\\\CurrentControlSet\\\\\\\\Policies\\\\\\\\Microsoft\\\\\\\\FeatureManagement\\\\\\\\Overrides\\\\n-  >Name: 2362988687\\\\n-  >Type: REG_DWORD\\\\n-  >Value: 0\\\\n+  >Windows Registry Editor Version 5.00\\\\n+  >\\\\n+  >[HKEY_LOCAL_MACHINE\\\\\\\\SYSTEM\\\\\\\\CurrentControlSet\\\\\\\\Policies\\\\\\\\Microsoft\\\\\\\\FeatureManagement\\\\\\\\Overrides]\\\\n+  >\\\\\\\"2362988687\\\\\\\"=dword:00000000\\\\n   >```\\\\n   >\\\\n   >This registry modification is a workaround. Windows Server 2025 support for Microsoft Entra Connect Sync is planned for a future release.\\\"\\r\\n}. Please summarise it in a few sentences, using UK grammar and ensure the response is formatted for markdown. Do not start the response with here is summary.\",\"role\":\"user\"}",
      "Response": "The commit addresses a known issue with Microsoft Entra Connect Sync on Windows Server 2025 when the KB5065426 update is installed. It provides a registry key modification as a workaround to prevent sync disruptions. Support for Windows Server 2025 in Microsoft Entra Connect Sync is anticipated in a future release.",
      "Model": "google:gemini-2.5-flash-lite",
      "Provider": "google",
      "ModelName": "gemini-2.5-flash-lite",
      "Timestamp": "2025-10-14T23:00:40.3754495+00:00"
    },
    "files": [
      {
        "filename": "docs/identity/hybrid/connect/how-to-connect-install-prerequisites.md",
        "status": "modified",
        "additions": 4,
        "deletions": 4
      }
    ]
  },
  {
    "sha": "f4b96ccdb077e25a5947b5c4f673f9ee2f72cafb",
    "url": "https://github.com/MicrosoftDocs/entra-docs/commit/f4b96ccdb077e25a5947b5c4f673f9ee2f72cafb",
    "author": "prmerger-automator[bot]",
    "email": "40007230+prmerger-automator[bot]@users.noreply.github.com",
    "date": "2025-10-14T21:48:04Z",
    "message": "Merge pull request #10017 from NuAlex/docs-editor/how-to-prerequisites-1760474149\n\nUpdate how-to-prerequisites.md",
    "ai_summary": {
      "Messages": "{\"content\":\"The following is the commit files that have changed: {\\r\\n  \\\"sha\\\": \\\"c43a42b598140e99ee2b696d705bc777a528eccc\\\",\\r\\n  \\\"filename\\\": \\\"docs/identity/hybrid/cloud-sync/how-to-prerequisites.md\\\",\\r\\n  \\\"status\\\": \\\"modified\\\",\\r\\n  \\\"additions\\\": 19,\\r\\n  \\\"deletions\\\": 3,\\r\\n  \\\"changes\\\": 22,\\r\\n  \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/f4b96ccdb077e25a5947b5c4f673f9ee2f72cafb/docs%2Fidentity%2Fhybrid%2Fcloud-sync%2Fhow-to-prerequisites.md\\\",\\r\\n  \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/f4b96ccdb077e25a5947b5c4f673f9ee2f72cafb/docs%2Fidentity%2Fhybrid%2Fcloud-sync%2Fhow-to-prerequisites.md\\\",\\r\\n  \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fidentity%2Fhybrid%2Fcloud-sync%2Fhow-to-prerequisites.md?ref=f4b96ccdb077e25a5947b5c4f673f9ee2f72cafb\\\",\\r\\n  \\\"patch\\\": \\\"@@ -21,11 +21,27 @@ This article provides guidance on using Microsoft Entra Cloud Sync as your ident\\\\n You need the following to use Microsoft Entra Cloud Sync:\\\\n \\\\n - Domain Administrator or Enterprise Administrator credentials to create the Microsoft Entra Connect cloud sync gMSA (group managed service account) to run the agent service.\\\\n+\\\\n - A Hybrid Identity Administrator account for your Microsoft Entra tenant that isn't a guest user.\\\\n-- An on-premises server for the provisioning agent that runs Windows Server 2022, Windows Server 2019, or Windows Server 2016. This server should be a tier 0 server based on the [Active Directory administrative tier model](/security/privileged-access-workstations/privileged-access-access-model). Installing the agent on a domain controller is supported.  For more information, see [Harden your Microsoft Entra provisioning agent server](#harden-your-microsoft-entra-provisioning-agent-server)\\\\n \\\\n-  - Required for AD Schema attribute  - msDS-ExternalDirectoryObjectId\\\\n-    \\\\n+- Microsoft Entra Cloud Sync agent must be installed on a domain-joined server that runs Windows Server 2022, Windows Server 2019, or Windows Server 2016. We recommend Windows Server 2022. You can deploy Microsoft Entra Cloud Sync on Windows Server 2016, but since it's in extended support, you might need [a paid support program](/lifecycle/policies/fixed#extended-support) if you require support for this configuration. Installing on unsupported versions of Windows Server may cause service failures or unexpected behavior.\\\\n+\\\\n+- This server should be a tier 0 server based on the [Active Directory administrative tier model](/security/privileged-access-workstations/privileged-access-access-model). Installing the agent on a domain controller is supported.  For more information, see [Harden your Microsoft Entra provisioning agent server](#harden-your-microsoft-entra-provisioning-agent-server)\\\\n+\\\\n+  >[!IMPORTANT]\\\\n+  >**Windows Server 2025 is NOT supported. There is a known issue on Windows server 2025 with the [KB5065426](https://support.microsoft.com/en-us/topic/september-9-2025-kb5065426-os-build-26100-6584-77a41d9b-1b7c-4198-b9a5-3c4b6706dea9) update installed that will cause Microsoft Entra Connect Sync to encounter sync issues.** If you upgraded to Windows Server 2025 and installed update [KB5065426](https://support.microsoft.com/en-us/topic/september-9-2025-kb5065426-os-build-26100-6584-77a41d9b-1b7c-4198-b9a5-3c4b6706dea9), apply the following registry key as soon as possible to avoid sync disruption.\\\\n+  >\\\\n+  >```\\\\n+  >Windows Registry Editor Version 5.00\\\\n+  >\\\\n+  >[HKEY_LOCAL_MACHINE\\\\\\\\SYSTEM\\\\\\\\CurrentControlSet\\\\\\\\Policies\\\\\\\\Microsoft\\\\\\\\FeatureManagement\\\\\\\\Overrides]\\\\n+  >\\\\\\\"2362988687\\\\\\\"=dword:00000000\\\\n+  >```\\\\n+  >\\\\n+  >This registry modification is a workaround. Windows Server 2025 support for Microsoft Entra Cloud Sync is planned for a future release.\\\\n+\\\\n+- The Active Directory Schema is required to have the attribute msDS-ExternalDirectoryObjectId, which is available in Windows Server 2016 and later.\\\\n+\\\\n - The Windows Credential Manager service (VaultSvc) cannot be disabled as that prevents the provisioning agent from installing.\\\\n \\\\n - High availability refers to the Microsoft Entra Cloud Sync's ability to operate continuously without failure for a long time. By having multiple active agents installed and running, Microsoft Entra Cloud Sync can continue to function even if one agent should fail. Microsoft recommends having 3 active agents installed for high availability.\\\"\\r\\n}. Please summarise it in a few sentences, using UK grammar and ensure the response is formatted for markdown. Do not start the response with here is summary.\",\"role\":\"user\"}",
      "Response": "This update to the Microsoft Entra Cloud Sync prerequisites documentation clarifies several requirements. It now explicitly states the need for a Hybrid Identity Administrator account and provides detailed guidance on the supported Windows Server versions for the provisioning agent, including a warning about Windows Server 2025 and a workaround for a known issue with a specific update. The documentation also reiterates the necessity of the `msDS-ExternalDirectoryObjectId` attribute and the importance of the Windows Credential Manager service.",
      "Model": "google:gemini-2.5-flash-lite",
      "Provider": "google",
      "ModelName": "gemini-2.5-flash-lite",
      "Timestamp": "2025-10-14T23:00:41.8920759+00:00"
    },
    "files": [
      {
        "filename": "docs/identity/hybrid/cloud-sync/how-to-prerequisites.md",
        "status": "modified",
        "additions": 19,
        "deletions": 3
      }
    ]
  }
]