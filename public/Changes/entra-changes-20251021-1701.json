{
  "sha": "8d6a3754c4d890f2117a57a07d23af3d98ef8881",
  "url": "https://github.com/MicrosoftDocs/entra-docs/commit/8d6a3754c4d890f2117a57a07d23af3d98ef8881",
  "author": "Diana Richards",
  "email": "v-dirichards@microsoft.com",
  "date": "2025-10-21T15:08:24Z",
  "message": "Merge pull request #1785 from Jackson-Woods/patch-3\n\nDocument maximum regex based claims transforms and related errors",
  "ai_summary": {
    "Messages": "{\"content\":\"The following is the commit files that have changed: [\\r\\n  {\\r\\n    \\\"sha\\\": \\\"75124b66dbeda11aaffd2deffb65a0e6398399ac\\\",\\r\\n    \\\"filename\\\": \\\"docs/identity-platform/jwt-claims-customization.md\\\",\\r\\n    \\\"status\\\": \\\"modified\\\",\\r\\n    \\\"additions\\\": 2,\\r\\n    \\\"deletions\\\": 0,\\r\\n    \\\"changes\\\": 2,\\r\\n    \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/8d6a3754c4d890f2117a57a07d23af3d98ef8881/docs%2Fidentity-platform%2Fjwt-claims-customization.md\\\",\\r\\n    \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/8d6a3754c4d890f2117a57a07d23af3d98ef8881/docs%2Fidentity-platform%2Fjwt-claims-customization.md\\\",\\r\\n    \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fidentity-platform%2Fjwt-claims-customization.md?ref=8d6a3754c4d890f2117a57a07d23af3d98ef8881\\\",\\r\\n    \\\"patch\\\": \\\"@@ -91,6 +91,8 @@ If you need other transformations, submit your idea in the [feedback forum in Mi\\\\n \\\\n ## Regex-based claims transformation\\\\n \\\\n+You can use regular expressions to transform claims. A maximum of 20 total regex replacements can be made when using regex-based claims transformations.\\\\n+\\\\n The following image shows an example of the first level of transformation:\\\\n \\\\n :::image type=\\\\\\\"content\\\\\\\" source=\\\\\\\"./media/jwt-claims-customization/regexreplace-transform1.png\\\\\\\" alt-text=\\\\\\\"Screenshot of the first level of transformation.\\\\\\\":::\\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"sha\\\": \\\"c8f1d7d519dae5ac8c71ac8fdf383b1a96952b35\\\",\\r\\n    \\\"filename\\\": \\\"docs/identity-platform/reference-error-codes.md\\\",\\r\\n    \\\"status\\\": \\\"modified\\\",\\r\\n    \\\"additions\\\": 2,\\r\\n    \\\"deletions\\\": 0,\\r\\n    \\\"changes\\\": 2,\\r\\n    \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/8d6a3754c4d890f2117a57a07d23af3d98ef8881/docs%2Fidentity-platform%2Freference-error-codes.md\\\",\\r\\n    \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/8d6a3754c4d890f2117a57a07d23af3d98ef8881/docs%2Fidentity-platform%2Freference-error-codes.md\\\",\\r\\n    \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fidentity-platform%2Freference-error-codes.md?ref=8d6a3754c4d890f2117a57a07d23af3d98ef8881\\\",\\r\\n    \\\"patch\\\": \\\"@@ -206,6 +206,8 @@ The `error` field has several possible values - review the protocol documentatio\\\\n | AADSTS50161 | Failed to validate authorization url of external claims provider. |\\\\n | AADSTS50162 | Claims transformation has timed out. This indicates too many or too complex transformations may have been configured for this application. A retry of the request may succeed. Otherwise, please contact your admin to fix the configuration. |\\\\n | AADSTS50163 | Regular expression replacement for claims transformation has resulted in a claim which exceeds the size limit. Please contact your admin to fix the configuration.|\\\\n+| AADSTS501631 | Regular expression replacement for claims transformation results in too many replacements in the input sourceClaim. Please contact your admin to fix the configuration. |\\\\n+| AADSTS501632 | Regular expression replacement for claims transformation has too many substitution parameters in the replacement input parameter. Please contact your admin to fix the configuration. |\\\\n | AADSTS50164 | The supplied access token was not issued for the purpose for which it is being used. Expected a token with purpose '{name}'. |\\\\n | AADSTS50165 | The token encrypting algorithm '{algorithm}' requested by the application isn't supported for this type of token. This indicates the application is misconfigured. |\\\\n | AADSTS50166 | Request to External OIDC endpoint failed. |\\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"sha\\\": \\\"e90fe45bea29f3e3920b4b7abd3833383c4153d7\\\",\\r\\n    \\\"filename\\\": \\\"docs/identity-platform/saml-claims-customization.md\\\",\\r\\n    \\\"status\\\": \\\"modified\\\",\\r\\n    \\\"additions\\\": 3,\\r\\n    \\\"deletions\\\": 1,\\r\\n    \\\"changes\\\": 4,\\r\\n    \\\"blob_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/blob/8d6a3754c4d890f2117a57a07d23af3d98ef8881/docs%2Fidentity-platform%2Fsaml-claims-customization.md\\\",\\r\\n    \\\"raw_url\\\": \\\"https://github.com/MicrosoftDocs/entra-docs/raw/8d6a3754c4d890f2117a57a07d23af3d98ef8881/docs%2Fidentity-platform%2Fsaml-claims-customization.md\\\",\\r\\n    \\\"contents_url\\\": \\\"https://api.github.com/repos/MicrosoftDocs/entra-docs/contents/docs%2Fidentity-platform%2Fsaml-claims-customization.md?ref=8d6a3754c4d890f2117a57a07d23af3d98ef8881\\\",\\r\\n    \\\"patch\\\": \\\"@@ -155,6 +155,8 @@ You can use the following functions to transform claims.\\\\n \\\\n ## Regex-based claims transformation\\\\n \\\\n+You can use regular expressions to transform claims. A maximum of 20 total regex replacements can be made when using regex-based claims transformations.\\\\n+\\\\n The following image shows an example of the first level of transformation:\\\\n \\\\n :::image type=\\\\\\\"content\\\\\\\" source=\\\\\\\"./media/saml-claims-customization/regexreplace-transform1.png\\\\\\\" alt-text=\\\\\\\"Screenshot of the first level of transformation.\\\\\\\":::\\\\n@@ -170,7 +172,7 @@ The actions listed in the following table provide information about the first le\\\\n | `5` | `Add additional parameter` | More than one user attribute can be used for the transformation. The values of the attributes would then be merged with regex transformation output. Up to five more parameters are supported. |\\\\n | `6` | `Replacement pattern` | The replacement pattern is the text template, which contains placeholders for regex outcome. All group names must be wrapped inside the curly braces such as `{group-name}`. Let's say the administration wants to use user alias with some other domain name, for example `xyz.com` and merge country name with it. In this case, the replacement pattern would be `{country}.{domain}@xyz.com`, where `{country}` is the value of input parameter and `{domain}` is the group output from the regular expression evaluation. In such a case, the expected outcome is `US.swmal@xyz.com`. |\\\\n \\\\n-The following image shows an example of the second  level of transformation:\\\\n+The following image shows an example of the second level of transformation:\\\\n \\\\n :::image type=\\\\\\\"content\\\\\\\" source=\\\\\\\"./media/saml-claims-customization/regexreplace-transform2.png\\\\\\\" alt-text=\\\\\\\"Screenshot of second level of claims transformation.\\\\\\\":::\\\\n \\\"\\r\\n  }\\r\\n]. Please summarise it in a few sentences, using UK grammar and ensure the response is formatted for markdown. Do not start the response with here is summary.\",\"role\":\"user\"}",
    "Response": "The documentation for Microsoft Entra ID has been updated to provide more detail on claims transformation using regular expressions. Two new error codes, AADSTS501631 and AADSTS501632, have been introduced to address issues related to excessive regex replacements in claims transformation. Additionally, a limit of 20 regex replacements has been clarified across the JWT and SAML claims customisation pages.",
    "Model": "google:gemini-2.5-flash-lite",
    "Provider": "google",
    "ModelName": "gemini-2.5-flash-lite",
    "Timestamp": "2025-10-21T17:01:48.7407872+00:00"
  },
  "files": [
    {
      "filename": "docs/identity-platform/jwt-claims-customization.md",
      "status": "modified",
      "additions": 2,
      "deletions": 0
    },
    {
      "filename": "docs/identity-platform/reference-error-codes.md",
      "status": "modified",
      "additions": 2,
      "deletions": 0
    },
    {
      "filename": "docs/identity-platform/saml-claims-customization.md",
      "status": "modified",
      "additions": 3,
      "deletions": 1
    }
  ]
}